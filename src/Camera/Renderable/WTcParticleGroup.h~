#ifndef __WTCPARTICLEGROUP_H__
#define __WTCPARTICLEGROUP_H__

#if WT_FULL_VERSION_BAMBOO

class cParticleSettings
{
public:
	float RGB[8];
	float Speed[6];
	float Fade[2];
	float Position[6];
	float Size[2];

	cParticleSettings &operator=(cParticleSettings &lpOther);

	void SetColours(float *lpRGB);
	void SetSizes(float *lpSize);
	void SetFades(float *lpFade);
	void SetSpeeds(float *lpSpeed);
	void SetPositions(float *lpPos);

};


class cParticleForGroup
/**
 * These Particles will be controlled by cParticleGRoup. They should never be created by the user. cParticle is for User Creation.
 * They should only be generated by a cParticleGroup Object as this will control them.
 */
{

protected:
	cParticleForGroup();
public:
	cRGBA Color;
	float Position[3];
	float Speed[3];
	float Size;
	float FadeSpeed;
	float Life;



	~cParticleForGroup();
	friend class cParticleGroup;
	friend class cStarMap;

	virtual void UpdatePos();
	void UpdateFade();

	void Spawn(cParticleSettings &lpData);


	void SetSize(float lpSize);
	void SetFade(float lpFade);
	void SetSpeed(float *lpSpeed);
	void SetPosition(float *lpPos);

	void SetColor(float *lpRGB);
	void SetColor(cRGB *lpRGB);
	void SetColor(cRGBA *lpRGB);
	void SetColor(cRGB &lpRGB);
	void SetColor(cRGBA &lpRGB);

};


/*
 * This will allow Particles to have a local axis (this object and above objects).
 * This will generate the particles and control them. User calls this,
 */
class cParticleGroup : public cRenderObject
{
protected:
	cParticleSettings Data;
	cParticleForGroup **mpParticles;
	uint32 miParticles;
	uint32 miSpaces;
	bool mbRespawn;
	bool mbUseGravity;



public:

	cParticleGroup(uint32 liParticles);
	cParticleGroup(uint32 liParticles,vRenderNode *lpNode);
	cParticleGroup(uint32 liParticles,cCamera *lpCamera);
	cParticleSettings &Settings(){return Data;};
	~cParticleGroup();

	void Initialise(uint32 liParticles);
	void Settings(cParticleSettings &lpOther){Data=lpOther;}
	virtual void RespawnAll();
	void RespawnOn(){mbRespawn=true;};
	void Fade(){mbRespawn=false;};

	virtual void Refresh();
	void UseGravity(){mbUseGravity=true;};
	void NotUseGravity(){mbUseGravity=false;};
	void RenderPainter();

	uint32 LivingParticles();

};


#endif

#endif
