<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DivWin: /media/FileStore/My Documents/C++ Code/DivWinLibrary/src/Physics/WTcCollisionObject.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DivWin&#160;<span id="projectnumber">1.0v</span></div>
   <div id="projectbrief">Games Engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('_w_tc_collision_object_8cpp.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>/media/FileStore/My Documents/C++ Code/DivWinLibrary/src/Physics/WTcCollisionObject.cpp</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include &quot;../WTDivWin.h&quot;</span>
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 
<a name="l00004"></a>00004 <span class="keywordtype">float</span> <a class="code" href="classc_collision_object.html#a3afac28cfda77f7ed63605e604c1139a" title="This is a temporary storage for transfering sizes between objects.">cCollisionObject::mfStaticSize</a>[3]={0.0f,0.0f,0.0f};
<a name="l00005"></a>00005 <span class="keywordtype">float</span> cCollisionObject::CollisionDistance=0.0f;
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 
<a name="l00011"></a><a class="code" href="classc_collision_object.html#ae87264d7ecd143a67244c95b10c07ab7">00011</a> <span class="keywordtype">bool</span> <a class="code" href="classc_collision_object.html#ae87264d7ecd143a67244c95b10c07ab7">cCollisionObject::ModelModel</a>(<a class="code" href="classc_collision_object.html">cCollisionObject</a> *lpOther)
<a name="l00012"></a>00012 {
<a name="l00013"></a>00013         
<a name="l00014"></a>00014         <span class="comment">// Objects get assigned to pointers so code is consistent and each object type is known.</span>
<a name="l00015"></a>00015         <a class="code" href="classc_mesh_collision.html">cMeshCollision</a> *lpPlanes;
<a name="l00016"></a>00016         <a class="code" href="classc_mesh_collision.html">cMeshCollision</a> *lpVerteces;
<a name="l00017"></a>00017         
<a name="l00018"></a>00018         <span class="comment">// Matrix showing the relative positions of the objects.</span>
<a name="l00019"></a>00019         <a class="code" href="classc_matrix4.html">cMatrix4</a> lmRelative;
<a name="l00020"></a>00020         
<a name="l00021"></a>00021         
<a name="l00022"></a>00022         <span class="comment">//Determine which object is model and which is sphere</span>
<a name="l00023"></a>00023         <span class="keywordflow">if</span>(<a class="code" href="classc_collision_object.html#a6ea07e3f2501b7092fed0130f150c4f4">Mesh</a>()-&gt;Verteces()&lt;lpOther-&gt;<a class="code" href="classc_collision_object.html#a6ea07e3f2501b7092fed0130f150c4f4">Mesh</a>()-&gt;<a class="code" href="classc_mesh_collision.html#a320c5e5f6f54144bce8f7b8ca0c7ac16">Verteces</a>())
<a name="l00024"></a>00024         {
<a name="l00025"></a>00025                 lpVerteces=<a class="code" href="classc_collision_object.html#a6ea07e3f2501b7092fed0130f150c4f4">Mesh</a>();
<a name="l00026"></a>00026                 lpPlanes=lpOther-&gt;<a class="code" href="classc_collision_object.html#a6ea07e3f2501b7092fed0130f150c4f4">Mesh</a>();
<a name="l00027"></a>00027                 <span class="comment">//Invert the Matrix of the object NOT moving</span>
<a name="l00028"></a>00028                 lmRelative=lpOther-&gt;<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a7473299a57ffcfe284e6fd9005b98592" title="THis will find the inverse of the matrix if it is a standard rotation / translation matrix...">InvertRotationMatrix</a>()*<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>();
<a name="l00029"></a>00029                 
<a name="l00030"></a>00030         }
<a name="l00031"></a>00031         <span class="keywordflow">else</span>
<a name="l00032"></a>00032         {
<a name="l00033"></a>00033                 lpVerteces=lpOther-&gt;<a class="code" href="classc_collision_object.html#a6ea07e3f2501b7092fed0130f150c4f4">Mesh</a>();
<a name="l00034"></a>00034                 lpPlanes=<a class="code" href="classc_collision_object.html#a6ea07e3f2501b7092fed0130f150c4f4">Mesh</a>();
<a name="l00035"></a>00035                 lmRelative=<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a7473299a57ffcfe284e6fd9005b98592" title="THis will find the inverse of the matrix if it is a standard rotation / translation matrix...">InvertRotationMatrix</a>()*lpOther-&gt;<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>();
<a name="l00036"></a>00036         }
<a name="l00037"></a>00037         
<a name="l00038"></a>00038         uint32 liVertex;
<a name="l00039"></a>00039         <span class="keywordflow">for</span>(liVertex=0;liVertex&lt;lpVerteces-&gt;<a class="code" href="classc_mesh_collision.html#a320c5e5f6f54144bce8f7b8ca0c7ac16">Verteces</a>();++liVertex)
<a name="l00040"></a>00040         {
<a name="l00041"></a>00041                 <span class="keywordtype">float</span> lpPos[3];
<a name="l00042"></a>00042                 <span class="keywordtype">double</span> lfValue;
<a name="l00043"></a>00043                 <span class="keywordtype">float</span> *lpPlane;
<a name="l00044"></a>00044                 
<a name="l00045"></a>00045                 <span class="keywordtype">float</span> *lpVertex;
<a name="l00046"></a>00046                 lpVertex=lpVerteces-&gt;<a class="code" href="classc_mesh_collision.html#ab93a75b10efc76b6bc79db256160f708">Vertex</a>(liVertex);
<a name="l00047"></a>00047                 
<a name="l00048"></a>00048                 uint32 liPlane;
<a name="l00049"></a>00049                 <span class="keywordflow">for</span>(liPlane=0;liPlane&lt;lpPlanes-&gt;<a class="code" href="classc_mesh_collision.html#a853eb76f9fdfa0171d666894041f73c3">Planes</a>();++liPlane)
<a name="l00050"></a>00050                 {
<a name="l00051"></a>00051                         lpPos[0]=lpVertex[0]*lmRelative[0]+lpVertex[1]*lmRelative[1]+lpVertex[2]*lmRelative[2]+lmRelative[12];
<a name="l00052"></a>00052                         lpPos[1]=lpVertex[0]*lmRelative[4]+lpVertex[1]*lmRelative[5]+lpVertex[2]*lmRelative[6]+lmRelative[13];
<a name="l00053"></a>00053                         lpPos[2]=lpVertex[0]*lmRelative[8]+lpVertex[1]*lmRelative[9]+lpVertex[2]*lmRelative[10]+lmRelative[14];
<a name="l00054"></a>00054                         
<a name="l00055"></a>00055                         lpPlane=lpPlanes-&gt;<a class="code" href="classc_mesh_collision.html#ad98fb9187728c385c40f5ec3cd105d0b">Plane</a>(liPlane);
<a name="l00056"></a>00056 
<a name="l00057"></a>00057                         lfValue=lpPos[0]*lpPlane[0]+lpPos[1]*lpPlane[1]+lpPos[2]*lpPlane[2];
<a name="l00058"></a>00058 
<a name="l00059"></a>00059                         <span class="keywordflow">if</span>(lfValue&gt;lpPlane[3]) <span class="keywordflow">break</span>;
<a name="l00060"></a>00060                 }
<a name="l00061"></a>00061                 <span class="keywordflow">if</span>(liPlane==lpPlanes-&gt;<a class="code" href="classc_mesh_collision.html#a853eb76f9fdfa0171d666894041f73c3">Planes</a>()) <span class="keywordflow">return</span> 1;
<a name="l00062"></a>00062         }
<a name="l00063"></a>00063         
<a name="l00064"></a>00064         <span class="keywordflow">return</span> 0;
<a name="l00065"></a>00065         
<a name="l00066"></a>00066 }
<a name="l00067"></a>00067 
<a name="l00068"></a><a class="code" href="classc_collision_object.html#aa4500b5834736e5abeabe71c300e64e8">00068</a> <span class="keywordtype">bool</span> <a class="code" href="classc_collision_object.html#aa4500b5834736e5abeabe71c300e64e8">cCollisionObject::RayRay</a>(<a class="code" href="classc_collision_object.html">cCollisionObject</a> *lpOther)
<a name="l00069"></a>00069 {
<a name="l00070"></a>00070         <a class="code" href="classc_beam_collision.html">cBeamCollision</a> *lpOne,*lpTwo;
<a name="l00071"></a>00071         
<a name="l00072"></a>00072         <span class="comment">// S + nV</span>
<a name="l00073"></a>00073         lpOne=<a class="code" href="classc_collision_object.html#a8a5a6900686ac3ac88cf6bdac71569ad">Beam</a>();
<a name="l00074"></a>00074         <span class="comment">// L + mU</span>
<a name="l00075"></a>00075         lpTwo=lpOther-&gt;<a class="code" href="classc_collision_object.html#a8a5a6900686ac3ac88cf6bdac71569ad">Beam</a>();
<a name="l00076"></a>00076         
<a name="l00077"></a>00077         <span class="keywordtype">float</span> lfDist[3];
<a name="l00078"></a>00078 
<a name="l00079"></a>00079         lfDist[0]=<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[12]-(lpOther-&gt;<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[12]);
<a name="l00080"></a>00080         lfDist[1]=<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[13]-(lpOther-&gt;<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[13]);
<a name="l00081"></a>00081         lfDist[2]=<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[14]-(lpOther-&gt;<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[14]);
<a name="l00082"></a>00082 
<a name="l00083"></a>00083         
<a name="l00084"></a>00084         <span class="keywordtype">float</span> Ray1[3],Ray2[3];
<a name="l00085"></a>00085         Ray1[0]=lpOne-&gt;<a class="code" href="classc_beam_collision.html#a00cc16fff57846f2fbbc2ec885931be4">RayVector</a>(0)*lpOne-&gt;<a class="code" href="classc_beam_collision.html#a2eb26dfd4255ce8a2a10a7b142fb7f42" title="Will return the length of the beam.">Length</a>();
<a name="l00086"></a>00086         Ray1[1]=lpOne-&gt;<a class="code" href="classc_beam_collision.html#a00cc16fff57846f2fbbc2ec885931be4">RayVector</a>(1)*lpOne-&gt;<a class="code" href="classc_beam_collision.html#a2eb26dfd4255ce8a2a10a7b142fb7f42" title="Will return the length of the beam.">Length</a>();
<a name="l00087"></a>00087         Ray1[2]=lpOne-&gt;<a class="code" href="classc_beam_collision.html#a00cc16fff57846f2fbbc2ec885931be4">RayVector</a>(2)*lpOne-&gt;<a class="code" href="classc_beam_collision.html#a2eb26dfd4255ce8a2a10a7b142fb7f42" title="Will return the length of the beam.">Length</a>();
<a name="l00088"></a>00088 
<a name="l00089"></a>00089         Ray2[0]=lpTwo-&gt;<a class="code" href="classc_beam_collision.html#a00cc16fff57846f2fbbc2ec885931be4">RayVector</a>(0)*lpTwo-&gt;<a class="code" href="classc_beam_collision.html#a2eb26dfd4255ce8a2a10a7b142fb7f42" title="Will return the length of the beam.">Length</a>();
<a name="l00090"></a>00090         Ray2[1]=lpTwo-&gt;<a class="code" href="classc_beam_collision.html#a00cc16fff57846f2fbbc2ec885931be4">RayVector</a>(1)*lpTwo-&gt;<a class="code" href="classc_beam_collision.html#a2eb26dfd4255ce8a2a10a7b142fb7f42" title="Will return the length of the beam.">Length</a>();
<a name="l00091"></a>00091         Ray2[2]=lpTwo-&gt;<a class="code" href="classc_beam_collision.html#a00cc16fff57846f2fbbc2ec885931be4">RayVector</a>(2)*lpTwo-&gt;<a class="code" href="classc_beam_collision.html#a2eb26dfd4255ce8a2a10a7b142fb7f42" title="Will return the length of the beam.">Length</a>();
<a name="l00092"></a>00092         
<a name="l00093"></a>00093         <span class="keywordtype">double</span> a,b,c,d,e,f;
<a name="l00094"></a>00094 
<a name="l00095"></a>00095         a=Ray1[0]*Ray1[0]+Ray1[1]*Ray1[1]+Ray1[2]*Ray1[2];
<a name="l00096"></a>00096         b=-Ray1[0]*Ray2[0]-Ray1[1]*Ray2[1]-Ray1[2]*Ray2[2];
<a name="l00097"></a>00097         c=Ray2[0]*Ray2[0]+Ray2[1]*Ray2[1]+Ray2[2]*Ray2[2];
<a name="l00098"></a>00098         d=Ray1[0]*lfDist[0]+Ray1[1]*lfDist[1]+Ray1[2]*lfDist[2];
<a name="l00099"></a>00099         e=-Ray2[0]*lfDist[0]-Ray2[1]*lfDist[1]-Ray2[2]*lfDist[2];
<a name="l00100"></a>00100         f=lfDist[0]*lfDist[0]+lfDist[1]*lfDist[1]+lfDist[2]*lfDist[2];
<a name="l00101"></a>00101 
<a name="l00102"></a>00102         <span class="keywordtype">double</span> det,s,t;
<a name="l00103"></a>00103         det=a*c-b*b;
<a name="l00104"></a>00104 
<a name="l00105"></a>00105         <span class="comment">//Non Parrallel.</span>
<a name="l00106"></a>00106         <span class="keywordflow">if</span>(det&gt;0)
<a name="l00107"></a>00107         {
<a name="l00108"></a>00108 
<a name="l00109"></a>00109                 s=b*e-c*d;
<a name="l00110"></a>00110                 t=b*d-a*e;
<a name="l00111"></a>00111                 <span class="keywordflow">if</span>(s &gt;=0.0f)
<a name="l00112"></a>00112                 {
<a name="l00113"></a>00113                         <span class="keywordflow">if</span>(s&lt;=det)
<a name="l00114"></a>00114                         {
<a name="l00115"></a>00115                                 <span class="keywordflow">if</span>(t&gt;=0.0f)
<a name="l00116"></a>00116                                 {
<a name="l00117"></a>00117                                         <span class="keywordflow">if</span>(t&lt;=det)
<a name="l00118"></a>00118                                         {
<a name="l00119"></a>00119 
<a name="l00120"></a>00120                                                 <span class="comment">//Region 0;</span>
<a name="l00121"></a>00121                                                 <span class="keywordtype">double</span> invDet=1.0f/det;
<a name="l00122"></a>00122                                                 s*=invDet;
<a name="l00123"></a>00123                                                 t*=invDet;
<a name="l00124"></a>00124                                         }
<a name="l00125"></a>00125                                         <span class="keywordflow">else</span>
<a name="l00126"></a>00126                                         {
<a name="l00127"></a>00127                                                 <span class="comment">//Region 3</span>
<a name="l00128"></a>00128                                                 <span class="comment">// F(s) = Q(s,1)</span>
<a name="l00129"></a>00129                                                 <span class="comment">//Q(s; t)       = as2 + 2bst + ct2 + 2ds + 2et + f</span>
<a name="l00130"></a>00130                                                 <span class="comment">//Q(s,1)= as2 + 2bs + c2 + 2ds + 2e + f</span>
<a name="l00131"></a>00131                                                 <span class="comment">// F&#39;(s) = 2*((b+d)+a*s)</span>
<a name="l00132"></a>00132                                                 <span class="comment">// F&#39;(S) = 0 when S = -(b+d)/a</span>
<a name="l00133"></a>00133                                                 <span class="keywordtype">double</span> tmp;
<a name="l00134"></a>00134                                                 t = 1;
<a name="l00135"></a>00135                                                 tmp = b+d;
<a name="l00136"></a>00136                                                 <span class="keywordflow">if</span> ( tmp &gt; 0 ) s = 0;
<a name="l00137"></a>00137                                                 <span class="keywordflow">else</span>    <span class="keywordflow">if</span> ( -tmp &gt; a ) s = 1;
<a name="l00138"></a>00138                                                 <span class="keywordflow">else</span> s = -tmp/a;
<a name="l00139"></a>00139                                         }
<a name="l00140"></a>00140                                 }
<a name="l00141"></a>00141                                 <span class="keywordflow">else</span>
<a name="l00142"></a>00142                                 {
<a name="l00143"></a>00143                                         <span class="comment">//Region 7</span>
<a name="l00144"></a>00144                                         <span class="comment">// F(t) = Q(s,0)</span>
<a name="l00145"></a>00145                                         <span class="comment">//Q(s; t)       = as2 + 2bst + ct2 + 2ds + 2et + f</span>
<a name="l00146"></a>00146                                         <span class="comment">//Q(s,0) =  as2+2ds</span>
<a name="l00147"></a>00147                                         <span class="comment">// F&#39;(t) = 2*a*s+2*d</span>
<a name="l00148"></a>00148                                         <span class="comment">// F&#39;(t) = 0 when T = -(2*d)/2*a</span>
<a name="l00149"></a>00149                                         <span class="keywordtype">double</span> tmp;
<a name="l00150"></a>00150                                         t = 0;
<a name="l00151"></a>00151                                         tmp = d;
<a name="l00152"></a>00152                                         <span class="keywordflow">if</span> ( tmp &gt; 0 ) s = 0;
<a name="l00153"></a>00153                                         <span class="keywordflow">else</span>    <span class="keywordflow">if</span> ( -tmp &gt; a ) s = 1;
<a name="l00154"></a>00154                                                 <span class="keywordflow">else</span> s = -tmp/a;
<a name="l00155"></a>00155                                 }
<a name="l00156"></a>00156                         }
<a name="l00157"></a>00157                         <span class="keywordflow">else</span>
<a name="l00158"></a>00158                         {
<a name="l00159"></a>00159                                 <span class="keywordflow">if</span>(t&gt;=0.0f)
<a name="l00160"></a>00160                                 {
<a name="l00161"></a>00161                                         <span class="keywordflow">if</span>(t&lt;=det)
<a name="l00162"></a>00162                                         {
<a name="l00163"></a>00163                                                 <span class="keywordtype">double</span> tmp;
<a name="l00164"></a>00164                                                 <span class="comment">//Region 1;</span>
<a name="l00165"></a>00165                                                 s = 1;
<a name="l00166"></a>00166                                                 tmp = b+e;
<a name="l00167"></a>00167                                                 <span class="keywordflow">if</span> ( tmp &gt; 0 ) t = 0;
<a name="l00168"></a>00168                                                 <span class="keywordflow">else</span>    <span class="keywordflow">if</span> ( -tmp &gt; c ) t = 1;
<a name="l00169"></a>00169                                                         <span class="keywordflow">else</span> t = -tmp/c;
<a name="l00170"></a>00170                                         }
<a name="l00171"></a>00171                                         <span class="keywordflow">else</span>
<a name="l00172"></a>00172                                         {
<a name="l00173"></a>00173                                                 <span class="comment">//Region 2</span>
<a name="l00174"></a>00174                                                 <span class="comment">//Q(s; t)       = as2 + 2bst + ct2 + 2ds + 2et + f</span>
<a name="l00175"></a>00175                                                 <span class="comment">// Q_s(1,1)/2 = a+b+d, Q_t(1,1)/2 = b+c+e</span>
<a name="l00176"></a>00176                                                 <span class="keywordtype">double</span> tmp;
<a name="l00177"></a>00177                                                 tmp = b+d;
<a name="l00178"></a>00178                                                 <span class="keywordflow">if</span> ( -tmp &lt; a ) <span class="comment">// Q_s(1,1) &gt; 0</span>
<a name="l00179"></a>00179                                                 {
<a name="l00180"></a>00180                                                 <span class="comment">// F(s) = Q(s,1) = (c+2*e+f)+2*(b+d)*s+(a)*s^2</span>
<a name="l00181"></a>00181                                                 <span class="comment">// F&#39;(s) = 2*((b+d)+a*s), F&#39;(S) = 0 when S = -(b+d)/a &lt; 1</span>
<a name="l00182"></a>00182                                                 t = 1;
<a name="l00183"></a>00183                                                 <span class="keywordflow">if</span> ( tmp &gt; 0 ) <span class="comment">// S &lt; 0, so minimum at s = 0</span>
<a name="l00184"></a>00184                                                         s = 0;
<a name="l00185"></a>00185                                                         <span class="keywordflow">else</span> <span class="comment">// 0 &lt;= S &lt; 1, so minimum at s = S</span>
<a name="l00186"></a>00186                                                         s = -tmp/a;
<a name="l00187"></a>00187                                                         }
<a name="l00188"></a>00188                                                         <span class="keywordflow">else</span> <span class="comment">// Q_s(1,1) &lt;= 0</span>
<a name="l00189"></a>00189                                                         {
<a name="l00190"></a>00190                                                                 s = 1;
<a name="l00191"></a>00191                                                                 tmp = b+e;
<a name="l00192"></a>00192                                                                 <span class="keywordflow">if</span> ( -tmp &lt; c ) <span class="comment">// Q_t(1,1) &gt; 0</span>
<a name="l00193"></a>00193                                                         {
<a name="l00194"></a>00194                                                                 <span class="comment">// F(t) = Q(1,t) = (a+2*d+f)+2*(b+e)*t+(c)*t^2</span>
<a name="l00195"></a>00195                                                                 <span class="comment">// F&#39;(t) = 2*((b+e)+c*t), F&#39;(T) = 0 when T = -(b+e)/c &lt; 1</span>
<a name="l00196"></a>00196                                                                 <span class="keywordflow">if</span> ( tmp &gt; 0 ) <span class="comment">// T &lt; 0, so minimum at t = 0</span>
<a name="l00197"></a>00197                                                         t = 0;
<a name="l00198"></a>00198                                                         <span class="keywordflow">else</span> <span class="comment">// 0 &lt;= T &lt; 1, so minimum at t = T</span>
<a name="l00199"></a>00199                                                         t = -tmp/c;
<a name="l00200"></a>00200                                                         }
<a name="l00201"></a>00201                                                         <span class="keywordflow">else</span> <span class="comment">// Q_t(1,1) &lt;= 0, gradient points to region 2, so minimum at t = 1</span>
<a name="l00202"></a>00202                                                         t = 1;
<a name="l00203"></a>00203                                                         }
<a name="l00204"></a>00204                                         }
<a name="l00205"></a>00205                                 }
<a name="l00206"></a>00206                                 <span class="keywordflow">else</span>
<a name="l00207"></a>00207                                 {
<a name="l00208"></a>00208                                         <span class="comment">//Region 8</span>
<a name="l00209"></a>00209                                         <span class="comment">//Q(s; t)       = as2 + 2bst + ct2 + 2ds + 2et + f</span>
<a name="l00210"></a>00210                                         <span class="comment">// Q_s(1,0)/2 = a+d, Q_t(1,0)/2 = b+c+e</span>
<a name="l00211"></a>00211                                         <span class="keywordtype">double</span> tmp;
<a name="l00212"></a>00212                                         tmp = d;
<a name="l00213"></a>00213                                         <span class="keywordflow">if</span> ( -tmp &lt; a ) <span class="comment">// Q_s(1,0) &gt; 0</span>
<a name="l00214"></a>00214                                                 {
<a name="l00215"></a>00215                                                         <span class="comment">// F(s) = Q(s,0) = as^2+2ds+f</span>
<a name="l00216"></a>00216                                                         <span class="comment">// F&#39;(s) = 2*(d+a*s), F&#39;(S) = 0 when S = -(d)/a &lt; 1</span>
<a name="l00217"></a>00217                                                         t = 1;
<a name="l00218"></a>00218                                                         <span class="keywordflow">if</span> ( tmp &gt; 0 ) <span class="comment">// S &lt; 0, so minimum at s = 0</span>
<a name="l00219"></a>00219                                                         s = 0;
<a name="l00220"></a>00220                                                         <span class="keywordflow">else</span> <span class="comment">// 0 &lt;= S &lt; 1, so minimum at s = S</span>
<a name="l00221"></a>00221                                                         s = -tmp/a;
<a name="l00222"></a>00222                                                 }
<a name="l00223"></a>00223                                                 <span class="keywordflow">else</span> <span class="comment">// Q_s(1,1) &lt;= 0</span>
<a name="l00224"></a>00224                                                         {
<a name="l00225"></a>00225                                                                 s = 1;
<a name="l00226"></a>00226                                                                 tmp = b+e;
<a name="l00227"></a>00227                                                                 <span class="keywordflow">if</span> ( -tmp &lt; c ) <span class="comment">// Q_t(1,0) &gt; 0</span>
<a name="l00228"></a>00228                                                         {
<a name="l00229"></a>00229                                                                 <span class="comment">// F(t) = Q(1,t) = (a+2*d+f)+2*(b+e)*t+(c)*t^2</span>
<a name="l00230"></a>00230                                                                 <span class="comment">// F&#39;(t) = 2*((b+e)+c*t), F&#39;(T) = 0 when T = -(b+e)/c &lt; 1</span>
<a name="l00231"></a>00231                                                                 <span class="keywordflow">if</span> ( tmp &gt; 0 ) <span class="comment">// T &lt; 0, so minimum at t = 0</span>
<a name="l00232"></a>00232                                                         t = 0;
<a name="l00233"></a>00233                                                         <span class="keywordflow">else</span> <span class="comment">// 0 &lt;= T &lt; 1, so minimum at t = T</span>
<a name="l00234"></a>00234                                                         t = -tmp/c;
<a name="l00235"></a>00235                                                         }
<a name="l00236"></a>00236                                                         <span class="keywordflow">else</span> <span class="comment">// Q_t(1,1) &lt;= 0, gradient points to region 2, so minimum at t = 1</span>
<a name="l00237"></a>00237                                                         t = 1;
<a name="l00238"></a>00238                                                         }
<a name="l00239"></a>00239                                 }
<a name="l00240"></a>00240                         }
<a name="l00241"></a>00241                 }
<a name="l00242"></a>00242                 <span class="keywordflow">else</span>
<a name="l00243"></a>00243                 {
<a name="l00244"></a>00244                         <span class="keywordflow">if</span>(t&gt;=0.0f)
<a name="l00245"></a>00245                         {
<a name="l00246"></a>00246                                 <span class="keywordflow">if</span>(t&lt;=det)
<a name="l00247"></a>00247                                 {
<a name="l00248"></a>00248                                         <span class="comment">//Region 5;</span>
<a name="l00249"></a>00249                                         <span class="comment">// F(t) = Q(0,t)</span>
<a name="l00250"></a>00250                                         <span class="comment">//Q(s; t)       = as2 + 2bst + ct2 + 2ds + 2et + f</span>
<a name="l00251"></a>00251                                         <span class="comment">//Q(0,t) =  ct2+2et+f</span>
<a name="l00252"></a>00252                                         <span class="comment">// F&#39;(t) = 2*ct+2*e</span>
<a name="l00253"></a>00253                                         <span class="comment">// F&#39;(t) = 0 when T = -(e)/c</span>
<a name="l00254"></a>00254                                         <span class="keywordtype">double</span> tmp;
<a name="l00255"></a>00255                                         s = 0;
<a name="l00256"></a>00256                                         tmp = e;
<a name="l00257"></a>00257                                         <span class="keywordflow">if</span> ( tmp &gt; 0 ) t = 0;
<a name="l00258"></a>00258                                         <span class="keywordflow">else</span>    <span class="keywordflow">if</span> ( -tmp &gt; c ) t = 1;
<a name="l00259"></a>00259                                         <span class="keywordflow">else</span> t = -tmp/(c);
<a name="l00260"></a>00260 
<a name="l00261"></a>00261                                 }
<a name="l00262"></a>00262                                 <span class="keywordflow">else</span>
<a name="l00263"></a>00263                                 {
<a name="l00264"></a>00264                                         <span class="comment">//Region 4</span>
<a name="l00265"></a>00265                                         <span class="comment">//Q(s; t)       = as2 + 2bst + ct2 + 2ds + 2et + f</span>
<a name="l00266"></a>00266                                         <span class="comment">//Q(0; t)       =  2et + ct2 +f</span>
<a name="l00267"></a>00267                                         <span class="comment">// Q_s(0,1)/2 = b+d, Q_t(0,1)/2 = c+e</span>
<a name="l00268"></a>00268                                         <span class="keywordtype">double</span> tmp;
<a name="l00269"></a>00269                                         tmp = b+d;
<a name="l00270"></a>00270                                         <span class="keywordflow">if</span> ( -tmp &lt; a ) <span class="comment">// Q_s(1,1) &gt; 0</span>
<a name="l00271"></a>00271                                                 {
<a name="l00272"></a>00272                                                         <span class="comment">// F(s) = Q(s,1) = as^2+2bs+c+2ds+2e+f</span>
<a name="l00273"></a>00273                                                         <span class="comment">// F&#39;(s) = 2*(b+d+a*s), F&#39;(S) = 0 when S = -(b+d)/a &lt; 1</span>
<a name="l00274"></a>00274                                                         t = 1;
<a name="l00275"></a>00275                                                         <span class="keywordflow">if</span> ( tmp &gt; 0 ) <span class="comment">// S &lt; 0, so minimum at s = 0</span>
<a name="l00276"></a>00276                                                         s = 0;
<a name="l00277"></a>00277                                                         <span class="keywordflow">else</span> <span class="comment">// 0 &lt;= S &lt; 1, so minimum at s = S</span>
<a name="l00278"></a>00278                                                         s = -tmp/a;
<a name="l00279"></a>00279                                                 }
<a name="l00280"></a>00280                                                 <span class="keywordflow">else</span> <span class="comment">// Q_s(1,1) &lt;= 0</span>
<a name="l00281"></a>00281                                                         {
<a name="l00282"></a>00282                                                                 s = 1;
<a name="l00283"></a>00283                                                                 tmp = e;
<a name="l00284"></a>00284                                                                 <span class="keywordflow">if</span> ( -tmp &lt; c ) <span class="comment">// Q_t(1,1) &gt; 0</span>
<a name="l00285"></a>00285                                                         {
<a name="l00286"></a>00286                                                                 <span class="comment">// F(t) = Q(0,t) = c*t^2+2et+f</span>
<a name="l00287"></a>00287                                                                 <span class="comment">// F&#39;(t) = 2*(c*t+e), F&#39;(T) = 0 when T = -(e)/c &lt; 1</span>
<a name="l00288"></a>00288                                                                 <span class="keywordflow">if</span> ( tmp &gt; 0 ) <span class="comment">// T &lt; 0, so minimum at t = 0</span>
<a name="l00289"></a>00289                                                         t = 0;
<a name="l00290"></a>00290                                                         <span class="keywordflow">else</span> <span class="comment">// 0 &lt;= T &lt; 1, so minimum at t = T</span>
<a name="l00291"></a>00291                                                         t = -tmp/c;
<a name="l00292"></a>00292                                                         }
<a name="l00293"></a>00293                                                         <span class="keywordflow">else</span> <span class="comment">// Q_t(1,1) &lt;= 0, gradient points to region 2, so minimum at t = 1</span>
<a name="l00294"></a>00294                                                         t = 1;
<a name="l00295"></a>00295                                                         }
<a name="l00296"></a>00296                                         
<a name="l00297"></a>00297                                 }
<a name="l00298"></a>00298                         }
<a name="l00299"></a>00299                         <span class="keywordflow">else</span>
<a name="l00300"></a>00300                         {
<a name="l00301"></a>00301                                 <span class="comment">//Region 6</span>
<a name="l00302"></a>00302                                 <span class="comment">//Q(s; t)       = as2 + 2bst + ct2 + 2ds + 2et + f</span>
<a name="l00303"></a>00303                                 <span class="comment">//Q_s(0,0)/2 = d. Q_t(0,0)/2 = e</span>
<a name="l00304"></a>00304                                 <span class="keywordtype">double</span> tmp;
<a name="l00305"></a>00305                                 tmp = d;
<a name="l00306"></a>00306                                 <span class="keywordflow">if</span> ( -tmp &gt; a) <span class="comment">// Q_s(0,0) &gt; 0</span>
<a name="l00307"></a>00307                                 {
<a name="l00308"></a>00308                                         <span class="comment">// F(s) = Q(s,0) = (a)*s^2+2ds+f</span>
<a name="l00309"></a>00309                                         <span class="comment">// F&#39;(s) = 2as+2d, F&#39;(S) = 0 when S = -d/a &lt; 1</span>
<a name="l00310"></a>00310                                         t = 1;
<a name="l00311"></a>00311                                         <span class="keywordflow">if</span> ( tmp &gt; 0 ) <span class="comment">// S &lt; 0, so minimum at s = 0</span>
<a name="l00312"></a>00312                                                 s = 0;
<a name="l00313"></a>00313                                         <span class="keywordflow">else</span> <span class="comment">// 0 &lt;= S &lt; 1, so minimum at s = S</span>
<a name="l00314"></a>00314                                                 s = -tmp/a;
<a name="l00315"></a>00315                                 }
<a name="l00316"></a>00316                                 <span class="keywordflow">else</span> <span class="comment">// Q_s(1,1) &lt;= 0</span>
<a name="l00317"></a>00317                                 {
<a name="l00318"></a>00318                                         s = 1;
<a name="l00319"></a>00319                                         tmp = e;
<a name="l00320"></a>00320                                         <span class="keywordflow">if</span> ( -tmp &lt; c ) <span class="comment">// Q_t(0,0) &gt; 0</span>
<a name="l00321"></a>00321                                         {
<a name="l00322"></a>00322                                                 <span class="comment">// F(t) = Q(0,t) = ct2+2et+f</span>
<a name="l00323"></a>00323                                                 <span class="comment">// F&#39;(t) = 2*(e+c*t), F&#39;(T) = 0 when T = -(e)/c &lt; 1</span>
<a name="l00324"></a>00324                                                 <span class="keywordflow">if</span> ( tmp &gt; 0 ) <span class="comment">// T &lt; 0, so minimum at t = 0</span>
<a name="l00325"></a>00325                                                         t = 0;
<a name="l00326"></a>00326                                                 <span class="keywordflow">else</span> <span class="comment">// 0 &lt;= T &lt; 1, so minimum at t = T</span>
<a name="l00327"></a>00327                                                         t = -tmp/c;
<a name="l00328"></a>00328                                         }
<a name="l00329"></a>00329                                         <span class="keywordflow">else</span> <span class="comment">// Q_t(1,1) &lt;= 0, gradient points to region 2, so minimum at t = 1</span>
<a name="l00330"></a>00330                                                 t = 1;
<a name="l00331"></a>00331                                 }
<a name="l00332"></a>00332                         }
<a name="l00333"></a>00333 
<a name="l00334"></a>00334                 }
<a name="l00335"></a>00335         }
<a name="l00336"></a>00336         <span class="keywordflow">else</span>
<a name="l00337"></a>00337         {
<a name="l00338"></a>00338                 <span class="comment">//Parrallel</span>
<a name="l00339"></a>00339                 <span class="keywordflow">if</span> ( b &gt; 0 )
<a name="l00340"></a>00340                 {
<a name="l00341"></a>00341                         <span class="comment">// compare intervals [-(b+d)/a,-d/a] to [0,1]</span>
<a name="l00342"></a>00342                         <span class="keywordflow">if</span> ( d &gt;= 0 )
<a name="l00343"></a>00343                         {       <span class="comment">// -d/a &lt;= 0, so minimum is at s = 0, t = 0</span>
<a name="l00344"></a>00344                                 s=0;
<a name="l00345"></a>00345                                 t=0;
<a name="l00346"></a>00346                         }
<a name="l00347"></a>00347                         <span class="keywordflow">else</span>    <span class="keywordflow">if</span> ( -d &lt;= a )
<a name="l00348"></a>00348                                 {       <span class="comment">// 0 &lt; -d/a &lt;= 1, so minimum is at s = -d/a, t = 0</span>
<a name="l00349"></a>00349                                         s=-d/a;
<a name="l00350"></a>00350                                         t=0;
<a name="l00351"></a>00351                                 }
<a name="l00352"></a>00352                         <span class="keywordflow">else</span>
<a name="l00353"></a>00353                         {       <span class="comment">// minimum occurs at s = 1, need to determine t (see below)</span>
<a name="l00354"></a>00354                                 <span class="keywordtype">double</span> tmp;
<a name="l00355"></a>00355                                 tmp = a+d;
<a name="l00356"></a>00356                                 <span class="keywordflow">if</span> ( -tmp &gt;= b ) t = 1; <span class="keywordflow">else</span> t = -tmp/b;
<a name="l00357"></a>00357                         }
<a name="l00358"></a>00358                 }
<a name="l00359"></a>00359                 <span class="keywordflow">else</span>
<a name="l00360"></a>00360                 {
<a name="l00361"></a>00361                         <span class="comment">// compare intervals [-d/a,-(b+d)/a] to [0,1]</span>
<a name="l00362"></a>00362                         <span class="keywordflow">if</span> ( -d &gt;= a )
<a name="l00363"></a>00363                         {
<a name="l00364"></a>00364                                 <span class="comment">// 1 &lt;= -d/a, so minimum is at s = 1, t = 0</span>
<a name="l00365"></a>00365                                 s=1;
<a name="l00366"></a>00366                                 t=0;
<a name="l00367"></a>00367                         }
<a name="l00368"></a>00368                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( d &lt;= 0 )
<a name="l00369"></a>00369                         {
<a name="l00370"></a>00370                                 <span class="comment">// 0 &lt;= -d/a &lt; 1, so minimum is at s = -d/a, t = 0</span>
<a name="l00371"></a>00371                                 s=-d/a;
<a name="l00372"></a>00372                                 t=0;
<a name="l00373"></a>00373                         }
<a name="l00374"></a>00374                         <span class="keywordflow">else</span>
<a name="l00375"></a>00375                                 <span class="comment">// minimum occurs at s = 0, need to determine t (see below)</span>
<a name="l00376"></a>00376                                 <span class="keywordflow">if</span> ( d &gt;= -b ) t = 1; <span class="keywordflow">else</span> t = -d/b;
<a name="l00377"></a>00377                                 
<a name="l00378"></a>00378                 }
<a name="l00379"></a>00379                 
<a name="l00380"></a>00380 
<a name="l00381"></a>00381         }
<a name="l00382"></a>00382 
<a name="l00383"></a>00383 <span class="comment">/*      </span>
<a name="l00384"></a>00384 <span class="comment">Collision is at point lfDist from this</span>
<a name="l00385"></a>00385 <span class="comment">//Find dist between closest points</span>
<a name="l00386"></a>00386 <span class="comment">lfDist[0]=lfDist[0]+s*Ray1[0]-t*Ray2[0];</span>
<a name="l00387"></a>00387 <span class="comment">lfDist[1]=lfDist[1]+s*Ray1[1]-t*Ray2[1];</span>
<a name="l00388"></a>00388 <span class="comment">lfDist[2]=lfDist[2]+s*Ray1[2]-t*Ray2[2];</span>
<a name="l00389"></a>00389 <span class="comment"></span>
<a name="l00390"></a>00390 <span class="comment">det=lfDist[0]*lfDist[0]+lfDist[1]*lfDist[1]+lfDist[2]*lfDist[2];</span>
<a name="l00391"></a>00391 <span class="comment">*/</span>
<a name="l00392"></a>00392 
<a name="l00393"></a>00393 
<a name="l00394"></a>00394         det=a*s*s+2*b*s*t+c*t*t+2*d*s+2*e*t+f;
<a name="l00395"></a>00395 <span class="keywordflow">if</span>(det&lt;lpOne-&gt;CollisionSize()+lpTwo-&gt;<a class="code" href="classc_sphere_collision.html#aa06ac2f2047589d7d5d3b42500324dd5" title="Will return the Collision Size Value, which is the radius of the Collision Sphere squared...">CollisionSize</a>()) {<span class="keywordflow">return</span> <span class="keyword">true</span>;}
<a name="l00396"></a>00396 <span class="keywordflow">return</span> 0;
<a name="l00397"></a>00397         
<a name="l00398"></a>00398 }
<a name="l00399"></a>00399 
<a name="l00400"></a><a class="code" href="classc_collision_object.html#a299e49b5d78e1e7dbe5e801c7760462a">00400</a> <span class="keywordtype">bool</span> <a class="code" href="classc_collision_object.html#a299e49b5d78e1e7dbe5e801c7760462a">cCollisionObject::SphereModel</a>(<a class="code" href="classc_collision_object.html">cCollisionObject</a> *lpOther)
<a name="l00401"></a>00401 {
<a name="l00402"></a>00402 
<a name="l00403"></a>00403 <span class="comment">// Objects get assigned to pointers so code is consistent and each object type is known.</span>
<a name="l00404"></a>00404  <a class="code" href="classc_sphere_collision.html">cSphereCollision</a> *lpSphere;
<a name="l00405"></a>00405  <a class="code" href="classc_mesh_collision.html">cMeshCollision</a> *lpModel;
<a name="l00406"></a>00406  
<a name="l00407"></a>00407 <span class="comment">// Matrix showing the relative positions of the objects.</span>
<a name="l00408"></a>00408 <a class="code" href="classc_matrix4.html">cMatrix4</a> lmRelative;
<a name="l00409"></a>00409 
<a name="l00410"></a>00410 
<a name="l00411"></a>00411 <span class="comment">//Determine which object is model and which is sphere</span>
<a name="l00412"></a>00412  <span class="keywordflow">if</span>(<a class="code" href="classc_collision_object.html#a6ea07e3f2501b7092fed0130f150c4f4">Mesh</a>())
<a name="l00413"></a>00413  {
<a name="l00414"></a>00414          lpSphere=lpOther-&gt;<a class="code" href="classc_collision_object.html#afe43e12c0ea0da5c3653450cb8dfb047">Sphere</a>();
<a name="l00415"></a>00415          lpModel=<a class="code" href="classc_collision_object.html#a6ea07e3f2501b7092fed0130f150c4f4">Mesh</a>();
<a name="l00416"></a>00416          lmRelative=<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a7473299a57ffcfe284e6fd9005b98592" title="THis will find the inverse of the matrix if it is a standard rotation / translation matrix...">InvertRotationMatrix</a>()*lpOther-&gt;<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>();
<a name="l00417"></a>00417  }
<a name="l00418"></a>00418  <span class="keywordflow">else</span>
<a name="l00419"></a>00419  {
<a name="l00420"></a>00420          lpSphere=<a class="code" href="classc_collision_object.html#afe43e12c0ea0da5c3653450cb8dfb047">Sphere</a>();
<a name="l00421"></a>00421          lpModel=lpOther-&gt;<a class="code" href="classc_collision_object.html#a6ea07e3f2501b7092fed0130f150c4f4">Mesh</a>();
<a name="l00422"></a>00422          lmRelative=lpOther-&gt;<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a7473299a57ffcfe284e6fd9005b98592" title="THis will find the inverse of the matrix if it is a standard rotation / translation matrix...">InvertRotationMatrix</a>()*<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>();
<a name="l00423"></a>00423  } 
<a name="l00424"></a>00424 
<a name="l00425"></a>00425 uint32 liLoop;
<a name="l00426"></a>00426  <span class="keywordflow">for</span>(liLoop=0;liLoop&lt;lpModel-&gt;<a class="code" href="classc_mesh_collision.html#a320c5e5f6f54144bce8f7b8ca0c7ac16">Verteces</a>();++liLoop)
<a name="l00427"></a>00427  {
<a name="l00428"></a>00428                 <span class="keywordtype">float</span> lpPos[3];
<a name="l00429"></a>00429                 <span class="keywordtype">double</span> lfValue;
<a name="l00430"></a>00430                 <span class="keywordtype">float</span> *lpVertex;
<a name="l00431"></a>00431                 lpVertex=lpModel-&gt;<a class="code" href="classc_mesh_collision.html#ab93a75b10efc76b6bc79db256160f708">Vertex</a>(liLoop);
<a name="l00432"></a>00432                 
<a name="l00433"></a>00433                 lpPos[0]=lpVertex[0]*lmRelative[0]+lpVertex[1]*lmRelative[1]+lpVertex[2]*lmRelative[2]+lmRelative[12];
<a name="l00434"></a>00434                 lpPos[1]=lpVertex[0]*lmRelative[4]+lpVertex[1]*lmRelative[5]+lpVertex[2]*lmRelative[6]+lmRelative[13];
<a name="l00435"></a>00435                 lpPos[2]=lpVertex[0]*lmRelative[8]+lpVertex[1]*lmRelative[9]+lpVertex[2]*lmRelative[10]+lmRelative[14];
<a name="l00436"></a>00436 
<a name="l00437"></a>00437                 lfValue=lpPos[0]*lpPos[0]+lpPos[1]*lpPos[1]+lpPos[2]*lpPos[2];
<a name="l00438"></a>00438 
<a name="l00439"></a>00439                 <span class="keywordflow">if</span>(lfValue&lt;lpSphere-&gt;CollisionSize()) <span class="keywordflow">return</span> 1;
<a name="l00440"></a>00440  }
<a name="l00441"></a>00441 
<a name="l00442"></a>00442  <span class="keywordflow">return</span> 0;
<a name="l00443"></a>00443 
<a name="l00444"></a>00444 }
<a name="l00445"></a>00445 
<a name="l00446"></a><a class="code" href="classc_collision_object.html#ae4761ec4a0f60667e83cb6d4cf39d359">00446</a> <span class="keywordtype">bool</span> <a class="code" href="classc_collision_object.html#ae4761ec4a0f60667e83cb6d4cf39d359">cCollisionObject::SphereRay</a>(<a class="code" href="classc_collision_object.html">cCollisionObject</a> *lpOther)
<a name="l00447"></a>00447 {
<a name="l00448"></a>00448    <a class="code" href="classc_beam_collision.html">cBeamCollision</a> *lpBeam;
<a name="l00449"></a>00449    <a class="code" href="classc_sphere_collision.html">cSphereCollision</a> *lpSphere;
<a name="l00450"></a>00450 
<a name="l00451"></a>00451    
<a name="l00452"></a>00452    <span class="keywordtype">double</span> lfEq[2];
<a name="l00453"></a>00453 
<a name="l00454"></a>00454   <span class="keywordtype">float</span> lfSpherePos[3],lfBeamPos[3];
<a name="l00455"></a>00455 
<a name="l00456"></a>00456   <span class="keywordflow">if</span>(<a class="code" href="classc_collision_object.html#ae1274b9a69dfa081cda23a840c9e2df4" title="This is the accurate way of determining the type of these objects.">Type</a>()==WT_COLLISION_BEAM)
<a name="l00457"></a>00457    {
<a name="l00458"></a>00458 
<a name="l00459"></a>00459 
<a name="l00460"></a>00460            lpBeam=<a class="code" href="classc_collision_object.html#a8a5a6900686ac3ac88cf6bdac71569ad">Beam</a>();
<a name="l00461"></a>00461            lpSphere=lpOther-&gt;<a class="code" href="classc_collision_object.html#afe43e12c0ea0da5c3653450cb8dfb047">Sphere</a>();
<a name="l00462"></a>00462            
<a name="l00463"></a>00463            lfSpherePos[0]=lpOther-&gt;<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[12];
<a name="l00464"></a>00464            lfSpherePos[1]=lpOther-&gt;<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[13];
<a name="l00465"></a>00465            lfSpherePos[2]=lpOther-&gt;<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[14];
<a name="l00466"></a>00466            
<a name="l00467"></a>00467            lfBeamPos[0]=<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[12];
<a name="l00468"></a>00468            lfBeamPos[1]=<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[13];
<a name="l00469"></a>00469            lfBeamPos[2]=<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[14];   
<a name="l00470"></a>00470    }
<a name="l00471"></a>00471    <span class="keywordflow">else</span>
<a name="l00472"></a>00472    {
<a name="l00473"></a>00473            lpSphere=<a class="code" href="classc_collision_object.html#afe43e12c0ea0da5c3653450cb8dfb047">Sphere</a>();
<a name="l00474"></a>00474            lpBeam=lpOther-&gt;<a class="code" href="classc_collision_object.html#a8a5a6900686ac3ac88cf6bdac71569ad">Beam</a>();
<a name="l00475"></a>00475            
<a name="l00476"></a>00476            lfSpherePos[0]=<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[12];
<a name="l00477"></a>00477            lfSpherePos[1]=<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[13];
<a name="l00478"></a>00478            lfSpherePos[2]=<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[14];
<a name="l00479"></a>00479            
<a name="l00480"></a>00480            lfBeamPos[0]=lpOther-&gt;<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[12];
<a name="l00481"></a>00481            lfBeamPos[1]=lpOther-&gt;<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[13];
<a name="l00482"></a>00482            lfBeamPos[2]=lpOther-&gt;<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a8697973a28e45b0866cce4cdba2e216d" title="This will return a pointer to this objects matrix data.">Matrix</a>()[14];
<a name="l00483"></a>00483    }
<a name="l00484"></a>00484 
<a name="l00485"></a>00485 lfEq[0]=(lfSpherePos[0]-lfBeamPos[0])*lpBeam-&gt;<a class="code" href="classc_beam_collision.html#a00cc16fff57846f2fbbc2ec885931be4">RayVector</a>(0)+(lfSpherePos[1]-lfBeamPos[1])*lpBeam-&gt;<a class="code" href="classc_beam_collision.html#a00cc16fff57846f2fbbc2ec885931be4">RayVector</a>(1)+(lfSpherePos[2]-lfBeamPos[2])*lpBeam-&gt;<a class="code" href="classc_beam_collision.html#a00cc16fff57846f2fbbc2ec885931be4">RayVector</a>(2);
<a name="l00486"></a>00486 
<a name="l00487"></a>00487 <span class="keywordflow">if</span>(lfEq[0]&lt;lpBeam-&gt;<a class="code" href="classc_beam_collision.html#a2eb26dfd4255ce8a2a10a7b142fb7f42" title="Will return the length of the beam.">Length</a>())
<a name="l00488"></a>00488 {
<a name="l00489"></a>00489         uint32 liCount;
<a name="l00490"></a>00490         lfEq[1]=0.0f;
<a name="l00491"></a>00491         <span class="keywordflow">for</span>(liCount=0;liCount&lt;3;++liCount)
<a name="l00492"></a>00492         {
<a name="l00493"></a>00493                 lfEq[1]+=(lfSpherePos[liCount]-(lfBeamPos[liCount]+lfEq[0]*lpBeam-&gt;<a class="code" href="classc_beam_collision.html#a00cc16fff57846f2fbbc2ec885931be4">RayVector</a>(liCount)))*(lfSpherePos[liCount]-(lfBeamPos[liCount]+lfEq[0]*lpBeam-&gt;<a class="code" href="classc_beam_collision.html#a00cc16fff57846f2fbbc2ec885931be4">RayVector</a>(liCount)));
<a name="l00494"></a>00494         }
<a name="l00495"></a>00495         <span class="keywordflow">if</span>(lfEq[1]&lt;(lpSphere-&gt;<a class="code" href="classc_sphere_collision.html#aa06ac2f2047589d7d5d3b42500324dd5" title="Will return the Collision Size Value, which is the radius of the Collision Sphere squared...">CollisionSize</a>()+lpBeam-&gt;<a class="code" href="classc_sphere_collision.html#aa06ac2f2047589d7d5d3b42500324dd5" title="Will return the Collision Size Value, which is the radius of the Collision Sphere squared...">CollisionSize</a>())) <span class="keywordflow">return</span> 1;
<a name="l00496"></a>00496 
<a name="l00497"></a>00497 }
<a name="l00498"></a>00498 
<a name="l00499"></a>00499 <span class="keywordflow">return</span> 0;
<a name="l00500"></a>00500  
<a name="l00501"></a>00501 
<a name="l00502"></a>00502 }
<a name="l00503"></a>00503 
<a name="l00504"></a><a class="code" href="classc_collision_object.html#a7ccea939e1f91fa7eeda4c31128901c3">00504</a> <span class="keywordtype">bool</span> <a class="code" href="classc_collision_object.html#a7ccea939e1f91fa7eeda4c31128901c3">cCollisionObject::RayModel</a>(<a class="code" href="classc_collision_object.html">cCollisionObject</a> *lpOther)
<a name="l00505"></a>00505 {
<a name="l00506"></a>00506         
<a name="l00507"></a>00507  <a class="code" href="classc_mesh_collision.html">cMeshCollision</a> *lpModel;
<a name="l00508"></a>00508  <a class="code" href="classc_beam_collision.html">cBeamCollision</a> *lpRay;
<a name="l00509"></a>00509 
<a name="l00510"></a>00510  <span class="keywordtype">float</span> *lpRayStart,*lpRayVector;
<a name="l00511"></a>00511  <a class="code" href="classc_matrix4.html">cMatrix4</a> lmRelative;
<a name="l00512"></a>00512 <span class="keywordflow">if</span>(<a class="code" href="classc_collision_object.html#a8a5a6900686ac3ac88cf6bdac71569ad">Beam</a>())
<a name="l00513"></a>00513 {
<a name="l00514"></a>00514         lpRay=<a class="code" href="classc_collision_object.html#a8a5a6900686ac3ac88cf6bdac71569ad">Beam</a>(); lpModel=lpOther-&gt;<a class="code" href="classc_collision_object.html#a6ea07e3f2501b7092fed0130f150c4f4">Mesh</a>();
<a name="l00515"></a>00515         lpRayVector=lpRay-&gt;<a class="code" href="classc_beam_collision.html#a00cc16fff57846f2fbbc2ec885931be4">RayVector</a>();
<a name="l00516"></a>00516                 <span class="comment">//Invert the Matrix of the object NOT moving</span>
<a name="l00517"></a>00517         lmRelative=lpOther-&gt;<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a7473299a57ffcfe284e6fd9005b98592" title="THis will find the inverse of the matrix if it is a standard rotation / translation matrix...">InvertRotationMatrix</a>()*<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>();
<a name="l00518"></a>00518         lpRayStart=&amp;(lmRelative[12]);
<a name="l00519"></a>00519 }
<a name="l00520"></a>00520 <span class="keywordflow">else</span>
<a name="l00521"></a>00521 {
<a name="l00522"></a>00522         lpModel=<a class="code" href="classc_collision_object.html#a6ea07e3f2501b7092fed0130f150c4f4">Mesh</a>();
<a name="l00523"></a>00523         lpRay=lpOther-&gt;<a class="code" href="classc_collision_object.html#a8a5a6900686ac3ac88cf6bdac71569ad">Beam</a>();
<a name="l00524"></a>00524         lpRayVector=lpRay-&gt;<a class="code" href="classc_beam_collision.html#a00cc16fff57846f2fbbc2ec885931be4">RayVector</a>();
<a name="l00525"></a>00525         lmRelative=<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().<a class="code" href="classc_matrix4.html#a7473299a57ffcfe284e6fd9005b98592" title="THis will find the inverse of the matrix if it is a standard rotation / translation matrix...">InvertRotationMatrix</a>()*lpOther-&gt;<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>();
<a name="l00526"></a>00526         lpRayStart=&amp;(lmRelative[12]);
<a name="l00527"></a>00527 }
<a name="l00528"></a>00528 
<a name="l00529"></a>00529 <span class="keywordtype">float</span> lpRV[3];
<a name="l00530"></a>00530 lpRV[0]=lpRayVector[0]*lmRelative[0]+lpRayVector[1]*lmRelative[1]+lpRayVector[2]*lmRelative[2];
<a name="l00531"></a>00531 lpRV[1]=lpRayVector[0]*lmRelative[4]+lpRayVector[1]*lmRelative[5]+lpRayVector[2]*lmRelative[6];
<a name="l00532"></a>00532 lpRV[2]=lpRayVector[0]*lmRelative[8]+lpRayVector[1]*lmRelative[9]+lpRayVector[2]*lmRelative[10];
<a name="l00533"></a>00533 
<a name="l00534"></a>00534 uint32 liCount;
<a name="l00535"></a>00535 <span class="keywordtype">double</span> lfAngle;
<a name="l00536"></a>00536 <span class="keywordtype">float</span> lpPosition[3];
<a name="l00537"></a>00537 <span class="keywordtype">float</span> *lpPlane;
<a name="l00538"></a>00538 <span class="keywordtype">float</span> Denom;
<a name="l00539"></a>00539 
<a name="l00540"></a>00540 <span class="keywordtype">float</span> lpFinalPos[3];
<a name="l00541"></a>00541 
<a name="l00542"></a>00542 
<a name="l00543"></a>00543 <span class="keywordflow">for</span>(liCount=0;liCount&lt;lpModel-&gt;<a class="code" href="classc_mesh_collision.html#ae6f99888d6401c90c5679b671f5b582c">Faces</a>();++liCount)
<a name="l00544"></a>00544 {
<a name="l00545"></a>00545     lpPlane=lpModel-&gt;<a class="code" href="classc_mesh_collision.html#a4bb3d32151bf4e95f53b3af69cc297ad">FacePlane</a>(liCount);
<a name="l00546"></a>00546     <span class="comment">//Find Ray / Plane intersection</span>
<a name="l00547"></a>00547     Denom=lpPlane[0]*lpRV[0]+lpPlane[1]*lpRV[1]+lpPlane[2]*lpRV[2];
<a name="l00548"></a>00548 <span class="comment">//    lpModel-&gt;Polygon(liCount).CalculateCenter();</span>
<a name="l00549"></a>00549     <span class="keywordflow">if</span>(Denom)
<a name="l00550"></a>00550     {
<a name="l00551"></a>00551             <span class="comment">// Denom=(lpPlane[4]-lpPlane[0]*lpRayStart[0]-lpPlane[1]*lpRayStart[1]-lpPlane[2]*lpRayStart[2])/(Denom);</span>
<a name="l00552"></a>00552             Denom=(lpPlane[3]-lpPlane[0]*lpRayStart[0]-lpPlane[1]*lpRayStart[1]-lpPlane[2]*lpRayStart[2])/(Denom);
<a name="l00553"></a>00553             uint32 SHOULD_THIS_BE_MFLENGTH;
<a name="l00554"></a>00554             
<a name="l00555"></a>00555             <span class="keywordflow">if</span>(Denom&lt;1.0f)
<a name="l00556"></a>00556             {
<a name="l00557"></a>00557                     <span class="comment">//Find the Ray position on the face.</span>
<a name="l00558"></a>00558                     lpPosition[0]=lpRayStart[0]+lpRV[0]*Denom;
<a name="l00559"></a>00559                     lpPosition[1]=lpRayStart[1]+lpRV[1]*Denom;
<a name="l00560"></a>00560                     lpPosition[2]=lpRayStart[2]+lpRV[2]*Denom;
<a name="l00561"></a>00561 
<a name="l00562"></a>00562                     
<a name="l00563"></a>00563                     
<a name="l00564"></a>00564                     <span class="comment">//Shift the collision point towards the centre, by up to the ray Radius</span>
<a name="l00565"></a>00565                     lpFinalPos[0]=lpModel-&gt;<a class="code" href="classc_mesh_collision.html#a0717da906fc411fac3a9f7dbe988800d">mlFaces</a>.<a class="code" href="classc_limited_list.html#aa3b0a10ecf4169b9bd7b41b0152e6a6a">mpList</a>[liCount].<a class="code" href="classc_polygon.html#a3c46ee1e83c3eadba91bb0e03abf3f4f">mlCenter</a>.<a class="code" href="classc_vertex.html#a62eeb6f276cebd487eb8f0f2c68590a3">mpData</a>[0];
<a name="l00566"></a>00566                     lpFinalPos[1]=lpModel-&gt;<a class="code" href="classc_mesh_collision.html#a0717da906fc411fac3a9f7dbe988800d">mlFaces</a>.<a class="code" href="classc_limited_list.html#aa3b0a10ecf4169b9bd7b41b0152e6a6a">mpList</a>[liCount].<a class="code" href="classc_polygon.html#a3c46ee1e83c3eadba91bb0e03abf3f4f">mlCenter</a>.<a class="code" href="classc_vertex.html#a62eeb6f276cebd487eb8f0f2c68590a3">mpData</a>[1];
<a name="l00567"></a>00567                     lpFinalPos[2]=lpModel-&gt;<a class="code" href="classc_mesh_collision.html#a0717da906fc411fac3a9f7dbe988800d">mlFaces</a>.<a class="code" href="classc_limited_list.html#aa3b0a10ecf4169b9bd7b41b0152e6a6a">mpList</a>[liCount].<a class="code" href="classc_polygon.html#a3c46ee1e83c3eadba91bb0e03abf3f4f">mlCenter</a>.<a class="code" href="classc_vertex.html#a62eeb6f276cebd487eb8f0f2c68590a3">mpData</a>[2];
<a name="l00568"></a>00568 
<a name="l00569"></a>00569                     lpFinalPos[0]-=lpPosition[0];
<a name="l00570"></a>00570                     lpFinalPos[1]-=lpPosition[1];
<a name="l00571"></a>00571                     lpFinalPos[2]-=lpPosition[2];
<a name="l00572"></a>00572 
<a name="l00573"></a>00573                     <span class="keywordtype">double</span> Inv=lpFinalPos[0]*lpFinalPos[0]+lpFinalPos[1]*lpFinalPos[1]+lpFinalPos[2]*lpFinalPos[2];
<a name="l00574"></a>00574                     <span class="keywordflow">if</span>(Inv&lt;lpRay-&gt;Length()*lpRay-&gt;<a class="code" href="classc_beam_collision.html#a2eb26dfd4255ce8a2a10a7b142fb7f42" title="Will return the length of the beam.">Length</a>()) <span class="keywordflow">return</span> 1;
<a name="l00575"></a>00575                     Inv=lpRay-&gt;<a class="code" href="classc_beam_collision.html#a2eb26dfd4255ce8a2a10a7b142fb7f42" title="Will return the length of the beam.">Length</a>()/Inv;
<a name="l00576"></a>00576 
<a name="l00577"></a>00577                     lpFinalPos[0]*=Inv;
<a name="l00578"></a>00578                     lpFinalPos[1]*=Inv;
<a name="l00579"></a>00579                     lpFinalPos[2]*=Inv;
<a name="l00580"></a>00580 
<a name="l00581"></a>00581                     lpFinalPos[0]+=lpPosition[0];
<a name="l00582"></a>00582                     lpFinalPos[1]+=lpPosition[1];
<a name="l00583"></a>00583                     lpFinalPos[2]+=lpPosition[2];
<a name="l00584"></a>00584                     lfAngle=lpModel-&gt;<a class="code" href="classc_mesh_collision.html#a7526a36774985d7304f37df574b6e069" title="Will return the sum of angles between the point lpPos and every vertex of cPolygon number liPolygon...">GetAngle</a>(lpFinalPos,liCount);
<a name="l00585"></a>00585                         
<a name="l00586"></a>00586                     lfAngle=lpModel-&gt;<a class="code" href="classc_mesh_collision.html#a7526a36774985d7304f37df574b6e069" title="Will return the sum of angles between the point lpPos and every vertex of cPolygon number liPolygon...">GetAngle</a>(lpPosition,liCount);
<a name="l00587"></a>00587                     <span class="keywordflow">if</span>(lfAngle&gt;WT_RAY_ANGLE_LOWER &amp;&amp; lfAngle&lt;WT_RAY_ANGLE_UPPER) <span class="keywordflow">return</span> 1;
<a name="l00588"></a>00588             }
<a name="l00589"></a>00589     }
<a name="l00590"></a>00590 
<a name="l00591"></a>00591 
<a name="l00592"></a>00592 }
<a name="l00593"></a>00593 
<a name="l00594"></a>00594 
<a name="l00595"></a>00595 
<a name="l00596"></a>00596 <span class="keywordflow">return</span> 0;
<a name="l00597"></a>00597 
<a name="l00598"></a>00598 }
<a name="l00599"></a>00599 
<a name="l00600"></a><a class="code" href="classc_collision_object.html#a66f5ab6f3e5b3d618625b8c254f477ab">00600</a> <span class="keywordtype">float</span> *<a class="code" href="classc_collision_object.html#a66f5ab6f3e5b3d618625b8c254f477ab" title="This will return the position of the selected object.">cCollisionObject::GetPos</a>()
<a name="l00601"></a>00601 {
<a name="l00602"></a>00602  <span class="keywordflow">return</span> mpFollowing-&gt;<a class="code" href="classv_render_object.html#a514553ffc449f026b50fa47496311860" title="This will return the global position of the object as rendered at the end of last frame...">GetGlobalPos</a>();
<a name="l00603"></a>00603 }
<a name="l00604"></a>00604 
<a name="l00605"></a><a class="code" href="classc_collision_object.html#a40afa697b7e09e716b471725e6e33805">00605</a> <span class="keywordtype">void</span> <a class="code" href="classc_collision_object.html#a40afa697b7e09e716b471725e6e33805" title="This will generate a collision list of all objects colliding with this object filtered by type liType...">cCollisionObject::GenerateCollisionList</a>(uint32 liType)
<a name="l00606"></a>00606 {
<a name="l00607"></a>00607   _COLLISION_HANDLER-&gt;GenerateCollisionList(<span class="keyword">this</span>,liType);
<a name="l00608"></a>00608 }
<a name="l00609"></a>00609 
<a name="l00610"></a><a class="code" href="classc_collision_object.html#ae6c320e7a3361fbbc4796463d777daab">00610</a> <span class="keywordtype">float</span> <a class="code" href="classc_collision_object.html#ae6c320e7a3361fbbc4796463d777daab">cCollisionObject::GetCollisionSize</a>()
<a name="l00611"></a>00611 {
<a name="l00612"></a>00612 <span class="keywordflow">return</span> <a class="code" href="classc_collision_object.html#afe43e12c0ea0da5c3653450cb8dfb047">Sphere</a>()-&gt;<a class="code" href="classc_sphere_collision.html#aa06ac2f2047589d7d5d3b42500324dd5" title="Will return the Collision Size Value, which is the radius of the Collision Sphere squared...">CollisionSize</a>();
<a name="l00613"></a>00613 }
<a name="l00614"></a>00614 
<a name="l00615"></a>00615 
<a name="l00616"></a><a class="code" href="classc_collision_object.html#a2a527f445a899adafbf18dddf140e179">00616</a> <span class="keywordtype">void</span> <a class="code" href="classc_collision_object.html#a1490cdf75c8037049bfa7891aa8756b7" title="This will return the current Collision Filter ID of this object.">cCollisionObject::CollisionFilter</a>(uint32 liID)
<a name="l00617"></a>00617 {
<a name="l00618"></a>00618 
<a name="l00619"></a>00619 <span class="keywordflow">if</span>(mpOwner)
<a name="l00620"></a>00620 {
<a name="l00621"></a>00621   <a class="code" href="classc_collision_handler.html#a1c4fee89d756b7c73dd877e732713f69" title="This will return a pointer to the classes current instance and if there is none it will create one...">cCollisionHandler::Instance</a>()-&gt;<a class="code" href="classc_collision_handler.html#a959870d5beee77a014b29e45bf153723" title="This is an array for storing all Collision Objects, that are currently on. The size of the array is s...">mpList</a>[miID].<a class="code" href="classc_linked_list.html#a57cda13916eac63747ff70071907d7ca">StitchOut</a>(mpOwner);
<a name="l00622"></a>00622   miID=liID;
<a name="l00623"></a>00623   <a class="code" href="classc_collision_handler.html#a1c4fee89d756b7c73dd877e732713f69" title="This will return a pointer to the classes current instance and if there is none it will create one...">cCollisionHandler::Instance</a>()-&gt;<a class="code" href="classc_collision_handler.html#a959870d5beee77a014b29e45bf153723" title="This is an array for storing all Collision Objects, that are currently on. The size of the array is s...">mpList</a>[miID].<a class="code" href="classc_linked_list.html#adf5505edbd4933ccde08183c539e6655">StitchIn</a>(mpOwner);
<a name="l00624"></a>00624 }
<a name="l00625"></a>00625 <span class="keywordflow">else</span> miID=liID;
<a name="l00626"></a>00626 }
<a name="l00627"></a>00627 
<a name="l00628"></a>00628 
<a name="l00629"></a>00629 
<a name="l00630"></a><a class="code" href="classc_collision_object.html#a86932ba04099dd34874fd3ada314168c">00630</a> <span class="keywordtype">void</span> <a class="code" href="classc_collision_object.html#a86932ba04099dd34874fd3ada314168c" title="This will remove the cCollisionObject from it&amp;#39;s Spatial Slots before its position is updated...">cCollisionObject::PreUpdateCache</a>()
<a name="l00631"></a>00631 {
<a name="l00632"></a>00632 
<a name="l00633"></a>00633 <span class="keywordflow">if</span>(mpOwner) <a class="code" href="classc_collision_handler.html#a1c4fee89d756b7c73dd877e732713f69" title="This will return a pointer to the classes current instance and if there is none it will create one...">cCollisionHandler::Instance</a>()-&gt;<a class="code" href="classc_collision_handler.html#a959870d5beee77a014b29e45bf153723" title="This is an array for storing all Collision Objects, that are currently on. The size of the array is s...">mpList</a>[<a class="code" href="classc_collision_handler.html#a1c4fee89d756b7c73dd877e732713f69" title="This will return a pointer to the classes current instance and if there is none it will create one...">cCollisionHandler::Instance</a>()-&gt;<a class="code" href="classc_collision_handler.html#ad2b079e234f956301fe83f5a5938cad0" title="This will find the appropriate array slot for the cCollisionObject lpObj. It will return the array po...">FindSlot</a>(<span class="keyword">this</span>)].<a class="code" href="classc_linked_list.html#a57cda13916eac63747ff70071907d7ca">StitchOut</a>(mpOwner);
<a name="l00634"></a>00634 
<a name="l00635"></a>00635 }
<a name="l00636"></a>00636 
<a name="l00637"></a><a class="code" href="classc_collision_object.html#a7719840f3fcc5bf3dcef08d123066739">00637</a> <span class="keywordtype">void</span> <a class="code" href="classc_collision_object.html#a7719840f3fcc5bf3dcef08d123066739" title="This will Add the cCollisionObject to the relevant Spatial Slots after it has found it&amp;#39;s new posi...">cCollisionObject::PostUpdateCache</a>()
<a name="l00638"></a>00638 {
<a name="l00639"></a>00639 
<a name="l00640"></a>00640 <span class="keywordflow">if</span>(mpOwner) <a class="code" href="classc_collision_handler.html#a1c4fee89d756b7c73dd877e732713f69" title="This will return a pointer to the classes current instance and if there is none it will create one...">cCollisionHandler::Instance</a>()-&gt;<a class="code" href="classc_collision_handler.html#a959870d5beee77a014b29e45bf153723" title="This is an array for storing all Collision Objects, that are currently on. The size of the array is s...">mpList</a>[<a class="code" href="classc_collision_handler.html#a1c4fee89d756b7c73dd877e732713f69" title="This will return a pointer to the classes current instance and if there is none it will create one...">cCollisionHandler::Instance</a>()-&gt;<a class="code" href="classc_collision_handler.html#ad2b079e234f956301fe83f5a5938cad0" title="This will find the appropriate array slot for the cCollisionObject lpObj. It will return the array po...">FindSlot</a>(<span class="keyword">this</span>)].<a class="code" href="classc_linked_list.html#adf5505edbd4933ccde08183c539e6655">StitchIn</a>(mpOwner);
<a name="l00641"></a>00641 
<a name="l00642"></a>00642 <span class="keywordflow">if</span>(mpObject) mpObject-&gt;<a class="code" href="classv_collision_data.html#ad50b697eb76cb65b80488b50e89b950d">Update</a>(mpFollowing-&gt;<a class="code" href="classv_render_object.html#a7ac4333806eaa793c4ce83e25764ad3b" title="Matrix which Stores the final global position matrix of the object from the last frame. This is used to make collisions consistent and for finding object Global Positions. Note the Camera MAtrix will be included in this.">mmCache</a>);
<a name="l00643"></a>00643 
<a name="l00644"></a>00644 }
<a name="l00645"></a>00645 
<a name="l00646"></a>00646 
<a name="l00647"></a>00647 
<a name="l00648"></a>00648 <span class="keywordtype">bool</span> CompareRanges(<span class="keywordtype">float</span> lf1,<span class="keywordtype">float</span> lf2,<span class="keywordtype">float</span> lfR)
<a name="l00649"></a>00649 {
<a name="l00650"></a>00650 <span class="keywordflow">if</span>(lf1+lf2&lt;lfR) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00651"></a>00651 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00652"></a>00652 }
<a name="l00653"></a>00653 
<a name="l00654"></a><a class="code" href="classc_collision_object.html#ae9f62c64221d8cc347010fed3cf6e8d1">00654</a> <span class="keywordtype">bool</span> <a class="code" href="classc_collision_object.html#ae9f62c64221d8cc347010fed3cf6e8d1">cCollisionObject::Collision</a>(<a class="code" href="classc_collision_object.html">cCollisionObject</a> *lpOther,uint32 lpCol)
<a name="l00655"></a>00655 {
<a name="l00656"></a>00656         uint32 THIS_SHOULD_NOT_BE_NECCESSARY;
<a name="l00657"></a>00657         <span class="keywordflow">if</span>(!lpCol || <a class="code" href="classc_collision_object.html#a1490cdf75c8037049bfa7891aa8756b7" title="This will return the current Collision Filter ID of this object.">CollisionFilter</a>()==lpCol)
<a name="l00658"></a>00658         {
<a name="l00659"></a>00659 
<a name="l00660"></a>00660                 <span class="keywordflow">if</span>(<a class="code" href="classc_collision_object.html#a6f5b5341a726cb0a54fe3271b110dc8c" title="This will check for a collision between this object and the object lpOther.">CheckCollision</a>(lpOther)) <span class="keywordflow">return</span> 1;
<a name="l00661"></a>00661         }
<a name="l00662"></a>00662         <span class="keywordflow">return</span> 0;
<a name="l00663"></a>00663 }
<a name="l00664"></a>00664 
<a name="l00665"></a><a class="code" href="classc_collision_object.html#abf62376a5806d878b5810acfd40bc450">00665</a> <span class="keywordtype">bool</span> <a class="code" href="classc_collision_object.html#ae9f62c64221d8cc347010fed3cf6e8d1">cCollisionObject::Collision</a>(<a class="code" href="classc_collision_object.html">cCollisionObject</a> *lpOther)
<a name="l00666"></a>00666 {
<a name="l00667"></a>00667         <span class="keywordflow">if</span>(<a class="code" href="classc_collision_object.html#a6f5b5341a726cb0a54fe3271b110dc8c" title="This will check for a collision between this object and the object lpOther.">CheckCollision</a>(lpOther)) <span class="keywordflow">return</span> 1;
<a name="l00668"></a>00668         <span class="keywordflow">return</span> 0;
<a name="l00669"></a>00669 }
<a name="l00670"></a>00670 
<a name="l00671"></a>00671 
<a name="l00672"></a>00672 
<a name="l00673"></a><a class="code" href="classc_collision_object.html#a6f5b5341a726cb0a54fe3271b110dc8c">00673</a> <span class="keywordtype">bool</span> <a class="code" href="classc_collision_object.html#a6f5b5341a726cb0a54fe3271b110dc8c" title="This will check for a collision between this object and the object lpOther.">cCollisionObject::CheckCollision</a>(<a class="code" href="classc_collision_object.html">cCollisionObject</a> *lpOther)
<a name="l00674"></a>00674 {
<a name="l00675"></a>00675         
<a name="l00676"></a>00676         <span class="keywordflow">if</span>(<a class="code" href="classc_signal.html#a90286da3e933e6fe2560fd0dfec777b2" title="This will return true if the object is Asleep.">Asleep</a>() || lpOther-&gt;<a class="code" href="classc_signal.html#a90286da3e933e6fe2560fd0dfec777b2" title="This will return true if the object is Asleep.">Asleep</a>() || <a class="code" href="classc_collision_object.html#ac56988f3641d39409fbf4ccba3525282">CreatedThisFrame</a>() || lpOther-&gt;<a class="code" href="classc_collision_object.html#ac56988f3641d39409fbf4ccba3525282">CreatedThisFrame</a>()) <span class="keywordflow">return</span> 0;
<a name="l00677"></a>00677         
<a name="l00678"></a>00678         <span class="keywordflow">if</span>(!<a class="code" href="classc_collision_object.html#a1d93858e03da25f8656ae688c4dedbce">TouchCollision</a>(lpOther)) <span class="keywordflow">return</span> 0;
<a name="l00679"></a>00679 
<a name="l00680"></a>00680         
<a name="l00681"></a>00681         
<a name="l00682"></a>00682         <span class="keywordflow">if</span>((<a class="code" href="classc_collision_object.html#ae1274b9a69dfa081cda23a840c9e2df4" title="This is the accurate way of determining the type of these objects.">Type</a>()==WT_COLLISION_RADIUS || <a class="code" href="classc_collision_object.html#ae1274b9a69dfa081cda23a840c9e2df4" title="This is the accurate way of determining the type of these objects.">Type</a>()==WT_COLLISION_BEAM) &amp;&amp; (lpOther-&gt;<a class="code" href="classc_collision_object.html#ae1274b9a69dfa081cda23a840c9e2df4" title="This is the accurate way of determining the type of these objects.">Type</a>()==WT_COLLISION_RADIUS || lpOther-&gt;<a class="code" href="classc_collision_object.html#ae1274b9a69dfa081cda23a840c9e2df4" title="This is the accurate way of determining the type of these objects.">Type</a>()==WT_COLLISION_BEAM)) <span class="keywordflow">return</span> 1;
<a name="l00683"></a>00683         
<a name="l00684"></a>00684         <span class="keywordflow">if</span>(<a class="code" href="classc_collision_object.html#ae1274b9a69dfa081cda23a840c9e2df4" title="This is the accurate way of determining the type of these objects.">Type</a>()==WT_COLLISION_MODEL)
<a name="l00685"></a>00685         {
<a name="l00686"></a>00686                 <span class="keywordflow">if</span>(lpOther-&gt;<a class="code" href="classc_collision_object.html#ae1274b9a69dfa081cda23a840c9e2df4" title="This is the accurate way of determining the type of these objects.">Type</a>()==WT_COLLISION_RADIUS) <span class="keywordflow">return</span> <a class="code" href="classc_collision_object.html#a299e49b5d78e1e7dbe5e801c7760462a">SphereModel</a>(lpOther);
<a name="l00687"></a>00687                 <span class="keywordflow">if</span>(lpOther-&gt;<a class="code" href="classc_collision_object.html#ae1274b9a69dfa081cda23a840c9e2df4" title="This is the accurate way of determining the type of these objects.">Type</a>()==WT_COLLISION_MODEL) <span class="keywordflow">return</span> <a class="code" href="classc_collision_object.html#ae87264d7ecd143a67244c95b10c07ab7">ModelModel</a>(lpOther);
<a name="l00688"></a>00688                 <span class="keywordflow">if</span>(lpOther-&gt;<a class="code" href="classc_collision_object.html#ae1274b9a69dfa081cda23a840c9e2df4" title="This is the accurate way of determining the type of these objects.">Type</a>()==WT_COLLISION_BEAM) <span class="keywordflow">return</span> <a class="code" href="classc_collision_object.html#a7ccea939e1f91fa7eeda4c31128901c3">RayModel</a>(lpOther);
<a name="l00689"></a>00689         }
<a name="l00690"></a>00690         
<a name="l00691"></a>00691         <span class="keywordflow">if</span>(<a class="code" href="classc_collision_object.html#ae1274b9a69dfa081cda23a840c9e2df4" title="This is the accurate way of determining the type of these objects.">Type</a>()==WT_COLLISION_BEAM)
<a name="l00692"></a>00692         {
<a name="l00693"></a>00693                 <span class="keywordflow">if</span>(lpOther-&gt;<a class="code" href="classc_collision_object.html#ae1274b9a69dfa081cda23a840c9e2df4" title="This is the accurate way of determining the type of these objects.">Type</a>()==WT_COLLISION_MODEL) <span class="keywordflow">return</span> <a class="code" href="classc_collision_object.html#a7ccea939e1f91fa7eeda4c31128901c3">RayModel</a>(lpOther);
<a name="l00694"></a>00694         }
<a name="l00695"></a>00695         
<a name="l00696"></a>00696         <span class="keywordflow">if</span>(<a class="code" href="classc_collision_object.html#ae1274b9a69dfa081cda23a840c9e2df4" title="This is the accurate way of determining the type of these objects.">Type</a>()==WT_COLLISION_RADIUS)
<a name="l00697"></a>00697         {
<a name="l00698"></a>00698                 <span class="keywordflow">if</span>(lpOther-&gt;<a class="code" href="classc_collision_object.html#ae1274b9a69dfa081cda23a840c9e2df4" title="This is the accurate way of determining the type of these objects.">Type</a>()==WT_COLLISION_MODEL) <span class="keywordflow">return</span> <a class="code" href="classc_collision_object.html#a299e49b5d78e1e7dbe5e801c7760462a">SphereModel</a>(lpOther);
<a name="l00699"></a>00699         }
<a name="l00700"></a>00700 
<a name="l00701"></a>00701         <span class="keywordflow">return</span> 0;
<a name="l00702"></a>00702 }
<a name="l00703"></a>00703 
<a name="l00704"></a><a class="code" href="classc_collision_object.html#a1d93858e03da25f8656ae688c4dedbce">00704</a> <span class="keywordtype">bool</span> <a class="code" href="classc_collision_object.html#a1d93858e03da25f8656ae688c4dedbce">cCollisionObject::TouchCollision</a>(<a class="code" href="classc_collision_object.html">cCollisionObject</a> *lpOther)
<a name="l00705"></a>00705 {
<a name="l00706"></a>00706         
<a name="l00707"></a>00707         <span class="keywordflow">if</span>(<a class="code" href="classc_collision_object.html#a8a5a6900686ac3ac88cf6bdac71569ad">Beam</a>() || lpOther-&gt;<a class="code" href="classc_collision_object.html#a8a5a6900686ac3ac88cf6bdac71569ad">Beam</a>())
<a name="l00708"></a>00708         {
<a name="l00709"></a>00709                 
<a name="l00710"></a>00710                 <span class="keywordflow">if</span>(<a class="code" href="classc_collision_object.html#a8a5a6900686ac3ac88cf6bdac71569ad">Beam</a>() &amp;&amp; lpOther-&gt;<a class="code" href="classc_collision_object.html#a8a5a6900686ac3ac88cf6bdac71569ad">Beam</a>()){ <span class="keywordflow">return</span> <a class="code" href="classc_collision_object.html#aa4500b5834736e5abeabe71c300e64e8">RayRay</a>(lpOther); }
<a name="l00711"></a>00711                 <span class="keywordflow">else</span>
<a name="l00712"></a>00712                 {
<a name="l00713"></a>00713                 
<a name="l00714"></a>00714                         <span class="keywordflow">return</span> <a class="code" href="classc_collision_object.html#ae4761ec4a0f60667e83cb6d4cf39d359">SphereRay</a>(lpOther);
<a name="l00715"></a>00715                 }
<a name="l00716"></a>00716         }
<a name="l00717"></a>00717         <span class="keywordflow">else</span>
<a name="l00718"></a>00718         {
<a name="l00719"></a>00719                 
<a name="l00720"></a>00720                 <span class="keywordflow">return</span> <a class="code" href="classc_collision_object.html#a53623f53b0ac497bfa1c794a76d2f818">SphereSphere</a>(lpOther);
<a name="l00721"></a>00721         }
<a name="l00722"></a>00722 };
<a name="l00723"></a>00723 
<a name="l00724"></a><a class="code" href="classc_collision_object.html#a0d08a63b8b7a3bcf6eb1c6617ec71e91">00724</a> <a class="code" href="classc_beam_collision.html">cBeamCollision</a> *<a class="code" href="classc_collision_object.html#ae465362052ff2026ed31c2fa3664d209" title="This will take a SphereCollision Object loaded from a file, and set this Collision Object to use it...">cCollisionObject::SetType</a>(<a class="code" href="classc_beam_mesh.html" title="A Procedurally generated cylindrical Renderable Object. This class will generate a cylinder with spec...">cBeamMesh</a> *lpBeam)
<a name="l00725"></a>00725 {
<a name="l00726"></a>00726         
<a name="l00727"></a>00727         <a class="code" href="classc_collision_object.html#a6ea3e10f69f7a2d5cae2bd4471461137">OnProcedural</a>();
<a name="l00728"></a>00728         miType=WT_COLLISION_BEAM;
<a name="l00729"></a>00729         mpObject=<span class="keyword">new</span> <a class="code" href="classc_beam_collision.html">cBeamCollision</a>;
<a name="l00730"></a>00730         <a class="code" href="classc_collision_object.html#a8a5a6900686ac3ac88cf6bdac71569ad">Beam</a>()-&gt;<a class="code" href="classc_beam_collision.html#a8341836a9d69ea56fa119276b6ed29f4" title="This will generate a cBeamCollision data set of length lfength and Radius lfRadius.">BuildObject</a>(lpBeam-&gt;<a class="code" href="classc_beam_mesh.html#a1d2f2bfef0e3f96597ae6e1e73072030" title="Sets the Length of the Cylinder.">Length</a>(),lpBeam-&gt;<a class="code" href="classc_beam_mesh.html#ac11934e813765321e76405cd96304088" title="Sets the Radius of the Cylinder.">Radius</a>());
<a name="l00731"></a>00731         <span class="keywordflow">return</span> <a class="code" href="classc_collision_object.html#a8a5a6900686ac3ac88cf6bdac71569ad">Beam</a>();
<a name="l00732"></a>00732         
<a name="l00733"></a>00733 };
<a name="l00734"></a>00734 
<a name="l00735"></a><a class="code" href="classc_collision_object.html#a761dae3de0ea58d4d60b98348177b7ed">00735</a> <a class="code" href="classc_ray_collision.html">cRayCollision</a> *<a class="code" href="classc_collision_object.html#ae465362052ff2026ed31c2fa3664d209" title="This will take a SphereCollision Object loaded from a file, and set this Collision Object to use it...">cCollisionObject::SetType</a>(<a class="code" href="classc_render_object.html" title="This class contains the base code for all renderable objects. Any renderable object should inherit th...">cRenderObject</a> *lpObj)
<a name="l00736"></a>00736 {
<a name="l00737"></a>00737         
<a name="l00738"></a>00738         mpFollowing=lpObj;
<a name="l00739"></a>00739         <a class="code" href="classc_collision_object.html#a6ea3e10f69f7a2d5cae2bd4471461137">OnProcedural</a>();
<a name="l00740"></a>00740         miType=WT_COLLISION_RAY;
<a name="l00741"></a>00741         mpObject=<span class="keyword">new</span> <a class="code" href="classc_ray_collision.html">cRayCollision</a>;
<a name="l00742"></a>00742         <a class="code" href="classc_collision_object.html#ac46982867551f6dd05c0dbcae0e57796">Ray</a>()-&gt;<a class="code" href="classc_sphere_collision.html#ae4380fc994c031dbf950ab3dd9a95de7" title="Will Set the Size of the Collision (For the Sphere aspect of collisions.) This should be the radius o...">SetSize</a>(1.0f);
<a name="l00743"></a>00743         <span class="keywordflow">return</span> <a class="code" href="classc_collision_object.html#ac46982867551f6dd05c0dbcae0e57796">Ray</a>();
<a name="l00744"></a>00744         
<a name="l00745"></a>00745 };
<a name="l00746"></a>00746 
<a name="l00747"></a><a class="code" href="classc_collision_object.html#a53623f53b0ac497bfa1c794a76d2f818">00747</a> <span class="keywordtype">bool</span> <a class="code" href="classc_collision_object.html#a53623f53b0ac497bfa1c794a76d2f818">cCollisionObject::SphereSphere</a>(<a class="code" href="classc_collision_object.html">cCollisionObject</a> *lpOther)
<a name="l00748"></a>00748 {
<a name="l00749"></a>00749         
<a name="l00750"></a>00750   <span class="keywordflow">if</span>(<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>().DistanceSq(lpOther-&gt;<a class="code" href="classc_collision_object.html#abc47ab584910cc877b5e723be4e09eac" title="This will return the Objects Cached Matrix mmCache.">CacheMatrix</a>())&lt;<a class="code" href="classc_collision_object.html#ae6c320e7a3361fbbc4796463d777daab">GetCollisionSize</a>()+lpOther-&gt;<a class="code" href="classc_collision_object.html#ae6c320e7a3361fbbc4796463d777daab">GetCollisionSize</a>()) <span class="keywordflow">return</span> 1;
<a name="l00751"></a>00751   <span class="keywordflow">return</span> 0;
<a name="l00752"></a>00752 }
<a name="l00753"></a>00753 
<a name="l00754"></a><a class="code" href="classc_collision_object.html#ac01e53c6dadd3ab8036f485b9115aedd">00754</a> <a class="code" href="classc_collision_object.html#ac01e53c6dadd3ab8036f485b9115aedd">cCollisionObject::~cCollisionObject</a>()
<a name="l00755"></a>00755 {
<a name="l00756"></a>00756         
<a name="l00757"></a>00757         <a class="code" href="classc_collision_object.html#a908a1cbe39b07c53849f60fecb5230dc">ClearProcedural</a>();
<a name="l00758"></a>00758         <a class="code" href="classc_signal.html#a81f676eca534ecd98897fd9ec5d4ce7c">mbAlive</a>=<span class="keyword">false</span>;
<a name="l00759"></a>00759         <a class="code" href="classc_signal.html#a25c364b54cb364ed6e96366a3e06cf73">mbAwake</a>=<span class="keyword">false</span>;
<a name="l00760"></a>00760         mpLinked=0;
<a name="l00761"></a>00761 
<a name="l00762"></a>00762 
<a name="l00763"></a>00763 <span class="keywordflow">if</span>(mpOwner){ <a class="code" href="classc_collision_handler.html#a1c4fee89d756b7c73dd877e732713f69" title="This will return a pointer to the classes current instance and if there is none it will create one...">cCollisionHandler::Instance</a>()-&gt;<a class="code" href="classc_collision_handler.html#ad2d0933b78c692a5d2b3885242fa0911" title="This will acutally remove the clinkedNode from the relevant list.">RemoveFromList</a>(mpOwner); mpOwner=0;}
<a name="l00764"></a>00764 
<a name="l00765"></a>00765 mpFollowing-&gt;<a class="code" href="classv_render_object.html#a1cd8f4961222c39ecdfa5ca155699fa3" title="Links The cCollisionObject lpObj to this Renderable Object.">LinkCollisionObject</a>(0);
<a name="l00766"></a>00766 
<a name="l00767"></a>00767 
<a name="l00768"></a>00768 };
<a name="l00769"></a>00769 
<a name="l00770"></a>00770 
<a name="l00771"></a><a class="code" href="classc_collision_object.html#ae465362052ff2026ed31c2fa3664d209">00771</a> <span class="keywordtype">void</span> <a class="code" href="classc_collision_object.html#ae465362052ff2026ed31c2fa3664d209" title="This will take a SphereCollision Object loaded from a file, and set this Collision Object to use it...">cCollisionObject::SetType</a>(<a class="code" href="classc_sphere_collision.html">cSphereCollision</a> *lpSphere){ <a class="code" href="classc_collision_object.html#a8ef73a19857e4a35470502776b0f03f8">OnFile</a>(lpSphere); miType=WT_COLLISION_RADIUS;};
<a name="l00773"></a><a class="code" href="classc_collision_object.html#a5c46dea7134fa466293938c22a780529">00773</a> <span class="keywordtype">void</span> <a class="code" href="classc_collision_object.html#ae465362052ff2026ed31c2fa3664d209" title="This will take a SphereCollision Object loaded from a file, and set this Collision Object to use it...">cCollisionObject::SetType</a>(<a class="code" href="classc_mesh_collision.html">cMeshCollision</a> *lpMesh){<a class="code" href="classc_collision_object.html#a8ef73a19857e4a35470502776b0f03f8">OnFile</a>(lpMesh); miType=WT_COLLISION_MODEL;};
<a name="l00775"></a><a class="code" href="classc_collision_object.html#a4282627cb1818f66842f3c8ff91cd20e">00775</a> <span class="keywordtype">void</span> <a class="code" href="classc_collision_object.html#ae465362052ff2026ed31c2fa3664d209" title="This will take a SphereCollision Object loaded from a file, and set this Collision Object to use it...">cCollisionObject::SetType</a>(<a class="code" href="classc_beam_collision.html">cBeamCollision</a> *lpBeam){<a class="code" href="classc_collision_object.html#a8ef73a19857e4a35470502776b0f03f8">OnFile</a>(lpBeam); miType=WT_COLLISION_BEAM;};
<a name="l00776"></a>00776 
<a name="l00777"></a><a class="code" href="classc_collision_object.html#a8ef73a19857e4a35470502776b0f03f8">00777</a> <span class="keywordtype">void</span> <a class="code" href="classc_collision_object.html#a8ef73a19857e4a35470502776b0f03f8">cCollisionObject::OnFile</a>(<a class="code" href="classv_collision_data.html" title="Virtual Class so cCollisionObject can access the Collision data object it needs.">vCollisionData</a> *lpPoint){<a class="code" href="classc_collision_object.html#a908a1cbe39b07c53849f60fecb5230dc">ClearProcedural</a>(); mbCreatedThisFrame=<span class="keyword">true</span>; mpObject=lpPoint; <a class="code" href="classc_collision_object.html#abec1a68ab54f2e80244c8b336bca3626" title="This is the function that will handle a system signal. Possible signals to be passed in are _S_SLEEP...">Signal</a>(_S_WAKE); ProceduralObj=<span class="keyword">false</span>;}
<a name="l00778"></a><a class="code" href="classc_collision_object.html#a6ea3e10f69f7a2d5cae2bd4471461137">00778</a> <span class="keywordtype">void</span> <a class="code" href="classc_collision_object.html#a6ea3e10f69f7a2d5cae2bd4471461137">cCollisionObject::OnProcedural</a>(){<a class="code" href="classc_collision_object.html#a908a1cbe39b07c53849f60fecb5230dc">ClearProcedural</a>();mbCreatedThisFrame=<span class="keyword">true</span>; <a class="code" href="classc_signal.html#a25c364b54cb364ed6e96366a3e06cf73">mbAwake</a>=<span class="keyword">true</span>; <a class="code" href="classc_signal.html#a81f676eca534ecd98897fd9ec5d4ce7c">mbAlive</a>=<span class="keyword">true</span>; ProceduralObj=<span class="keyword">true</span>; }
<a name="l00780"></a><a class="code" href="classc_collision_object.html#a22e6f4f5c722b6d45629d92488e5d925">00780</a> <a class="code" href="classc_sphere_collision.html">cSphereCollision</a> *<a class="code" href="classc_collision_object.html#ae465362052ff2026ed31c2fa3664d209" title="This will take a SphereCollision Object loaded from a file, and set this Collision Object to use it...">cCollisionObject::SetType</a>(<span class="keywordtype">float</span> lfSize)
<a name="l00781"></a>00781 {
<a name="l00782"></a>00782         
<a name="l00783"></a>00783         <a class="code" href="classc_collision_object.html#a6ea3e10f69f7a2d5cae2bd4471461137">OnProcedural</a>();
<a name="l00784"></a>00784         miType=WT_COLLISION_RADIUS;
<a name="l00785"></a>00785         mpObject=<span class="keyword">new</span> <a class="code" href="classc_sphere_collision.html">cSphereCollision</a>;
<a name="l00786"></a>00786         mpObject-&gt;<a class="code" href="classv_collision_data.html#a00a42430617c673f7716e1b543020dd3" title="Will Set the Size of the Collision (For the Sphere aspect of collisions.) This should be the radius o...">SetSize</a>(lfSize);
<a name="l00787"></a>00787         
<a name="l00788"></a>00788         <span class="keywordflow">return</span> <a class="code" href="classc_collision_object.html#afe43e12c0ea0da5c3653450cb8dfb047">Sphere</a>();
<a name="l00789"></a>00789         
<a name="l00790"></a>00790 };
<a name="l00792"></a><a class="code" href="classc_collision_object.html#ab5fc1f36d50ea87a69b4879076a92533">00792</a> <a class="code" href="classc_beam_collision.html">cBeamCollision</a> *<a class="code" href="classc_collision_object.html#ae465362052ff2026ed31c2fa3664d209" title="This will take a SphereCollision Object loaded from a file, and set this Collision Object to use it...">cCollisionObject::SetType</a>(<span class="keywordtype">float</span> lfLength,<span class="keywordtype">float</span> lfRadius){<a class="code" href="classc_collision_object.html#a6ea3e10f69f7a2d5cae2bd4471461137">OnProcedural</a>(); miType=WT_COLLISION_BEAM; mpObject=<span class="keyword">new</span> <a class="code" href="classc_beam_collision.html">cBeamCollision</a>; <a class="code" href="classc_collision_object.html#a8a5a6900686ac3ac88cf6bdac71569ad">Beam</a>()-&gt;<a class="code" href="classc_beam_collision.html#a8341836a9d69ea56fa119276b6ed29f4" title="This will generate a cBeamCollision data set of length lfength and Radius lfRadius.">BuildObject</a>(lfLength,lfRadius); <span class="keywordflow">return</span> <a class="code" href="classc_collision_object.html#a8a5a6900686ac3ac88cf6bdac71569ad">Beam</a>();};
<a name="l00794"></a><a class="code" href="classc_collision_object.html#a40b80411356222997bb94fae10796c93">00794</a> <a class="code" href="classc_mesh_collision.html">cMeshCollision</a> *<a class="code" href="classc_collision_object.html#ae465362052ff2026ed31c2fa3664d209" title="This will take a SphereCollision Object loaded from a file, and set this Collision Object to use it...">cCollisionObject::SetType</a>(<span class="keywordtype">float</span> *lpBounds)
<a name="l00795"></a>00795 {
<a name="l00796"></a>00796         
<a name="l00797"></a>00797         <a class="code" href="classc_collision_object.html#a6ea3e10f69f7a2d5cae2bd4471461137">OnProcedural</a>();
<a name="l00798"></a>00798         miType=WT_COLLISION_MODEL;
<a name="l00799"></a>00799         mpObject=<span class="keyword">new</span> <a class="code" href="classc_mesh_collision.html">cMeshCollision</a>;
<a name="l00800"></a>00800         mpObject-&gt;<a class="code" href="classv_collision_data.html#aa43965b2b0039ca5cb3398af7ae6dfd9" title="Will return a pointer if this object contains a Mesh collision data object. Otherwise returns 0;...">Mesh</a>()-&gt;<a class="code" href="classc_mesh_collision.html#a49a69f58cf68f61f995119c077c26a75">BuildObject</a>(lpBounds);
<a name="l00801"></a>00801         
<a name="l00802"></a>00802         <span class="keywordflow">return</span> mpObject-&gt;<a class="code" href="classv_collision_data.html#aa43965b2b0039ca5cb3398af7ae6dfd9" title="Will return a pointer if this object contains a Mesh collision data object. Otherwise returns 0;...">Mesh</a>();
<a name="l00803"></a>00803         
<a name="l00804"></a>00804 };
<a name="l00805"></a>00805 
<a name="l00806"></a>00806 
<a name="l00807"></a>00807 
<a name="l00808"></a><a class="code" href="classc_collision_object.html#abec1a68ab54f2e80244c8b336bca3626">00808</a> <span class="keywordtype">void</span> <a class="code" href="classc_collision_object.html#abec1a68ab54f2e80244c8b336bca3626" title="This is the function that will handle a system signal. Possible signals to be passed in are _S_SLEEP...">cCollisionObject::Signal</a>(SIGNAL liFlags)
<a name="l00809"></a>00809 {
<a name="l00810"></a>00810         <span class="comment">/*      miFlags=(miFlags|liFlags);</span>
<a name="l00811"></a>00811 <span class="comment">         * miFlags=(miFlags&amp;(~(liFlags&gt;&gt;16)));*/</span>
<a name="l00812"></a>00812         
<a name="l00813"></a>00813         <span class="keywordflow">if</span>(liFlags&amp;WT_SIGNAL_VALUE_WAKE &amp;&amp; <a class="code" href="classc_signal.html#a90286da3e933e6fe2560fd0dfec777b2" title="This will return true if the object is Asleep.">Asleep</a>())
<a name="l00814"></a>00814         {
<a name="l00815"></a>00815                 <span class="keywordflow">if</span>(mpObject) <a class="code" href="classc_signal.html#a25c364b54cb364ed6e96366a3e06cf73">mbAwake</a>=<span class="keyword">true</span>;
<a name="l00816"></a>00816                 <span class="keywordflow">else</span> <a class="code" href="classc_collision_object.html#ae465362052ff2026ed31c2fa3664d209" title="This will take a SphereCollision Object loaded from a file, and set this Collision Object to use it...">SetType</a>(1.0f);
<a name="l00817"></a>00817                 
<a name="l00818"></a>00818                 
<a name="l00819"></a>00819                 <span class="keywordflow">if</span>(!mpOwner) mpOwner=<a class="code" href="classc_collision_handler.html#a1c4fee89d756b7c73dd877e732713f69" title="This will return a pointer to the classes current instance and if there is none it will create one...">cCollisionHandler::Instance</a>()-&gt;<a class="code" href="classc_collision_handler.html#ae966359105ed5e144f62e36dd85d1f03" title="This will add the cCollisionObject pointed to by lpObject to the list mpList.">Add</a>(<span class="keyword">this</span>);
<a name="l00820"></a>00820                 
<a name="l00821"></a>00821                 mbCreatedThisFrame=<span class="keyword">true</span>;
<a name="l00822"></a>00822         }
<a name="l00823"></a>00823         <span class="keywordflow">if</span>(liFlags&amp;WT_SIGNAL_VALUE_SLEEP)
<a name="l00824"></a>00824         {
<a name="l00825"></a>00825                 <span class="keywordflow">if</span>(<a class="code" href="classc_signal.html#a64e6fb4aee9b3a6bee5b56c7b86294cd" title="This will return true if the object is Awake.">Awake</a>())
<a name="l00826"></a>00826                 {
<a name="l00827"></a>00827                         <a class="code" href="classc_signal.html#a25c364b54cb364ed6e96366a3e06cf73">mbAwake</a>=<span class="keyword">false</span>;
<a name="l00828"></a>00828                 
<a name="l00829"></a>00829                         <span class="keywordflow">if</span>(mpOwner){ <a class="code" href="classc_collision_handler.html#a1c4fee89d756b7c73dd877e732713f69" title="This will return a pointer to the classes current instance and if there is none it will create one...">cCollisionHandler::Instance</a>()-&gt;<a class="code" href="classc_collision_handler.html#ad2d0933b78c692a5d2b3885242fa0911" title="This will acutally remove the clinkedNode from the relevant list.">RemoveFromList</a>(mpOwner); mpOwner=0;}
<a name="l00830"></a>00830                 
<a name="l00831"></a>00831                 }
<a name="l00832"></a>00832         }
<a name="l00833"></a>00833         
<a name="l00834"></a>00834         <span class="keywordflow">if</span>(liFlags&amp;WT_SIGNAL_VALUE_KILL) {<span class="keyword">delete</span> <span class="keyword">this</span>;}
<a name="l00835"></a>00835         
<a name="l00836"></a>00836 }
<a name="l00837"></a>00837 
<a name="l00838"></a>00838 
<a name="l00839"></a><a class="code" href="classc_collision_object.html#a90f4a7fe0445396ddf49e14bda27f2dc">00839</a> <a class="code" href="classc_collision_object.html#a90f4a7fe0445396ddf49e14bda27f2dc">cCollisionObject::cCollisionObject</a>(<a class="code" href="classv_render_object.html" title="virtual function for producing renderable objects. see cRenderObject.">vRenderObject</a> *lpFollow,<a class="code" href="classv_process.html" title="This is the virtual base class for a system process, see cProcess.">vProcess</a> *lpLinked,uint32 liFilterType)
<a name="l00840"></a>00840 {
<a name="l00841"></a>00841                 mpObject=0;
<a name="l00842"></a>00842         
<a name="l00843"></a>00843                 mpOwner=0;
<a name="l00844"></a>00844         
<a name="l00845"></a>00845                 mpLinked=0;
<a name="l00846"></a>00846                 mpFollowing=0;
<a name="l00847"></a>00847                 ProceduralObj=<span class="keyword">false</span>;
<a name="l00848"></a>00848                 <a class="code" href="classc_collision_object.html#a908a1cbe39b07c53849f60fecb5230dc">ClearProcedural</a>();
<a name="l00849"></a>00849                 
<a name="l00850"></a>00850         <a class="code" href="classc_collision_object.html#a4aaae58a85bd7c1e6b5601a4e4cac3c1">Initialise</a>(lpFollow,lpLinked,liFilterType);
<a name="l00851"></a>00851         <a class="code" href="classc_collision_object.html#ae465362052ff2026ed31c2fa3664d209" title="This will take a SphereCollision Object loaded from a file, and set this Collision Object to use it...">SetType</a>(1.0f);
<a name="l00852"></a>00852 <span class="comment">//      cCollisionHandler::Instance()-&gt;mpList[miID].StitchIn(mpOwner);</span>
<a name="l00853"></a>00853         
<a name="l00854"></a>00854 };
<a name="l00855"></a>00855 
<a name="l00856"></a><a class="code" href="classc_collision_object.html#a38fc1abcd7a0f240d7ce41aca108bb43">00856</a> <a class="code" href="classc_collision_object.html#a90f4a7fe0445396ddf49e14bda27f2dc">cCollisionObject::cCollisionObject</a>(<a class="code" href="classc_beam_mesh.html" title="A Procedurally generated cylindrical Renderable Object. This class will generate a cylinder with spec...">cBeamMesh</a> *lpFollow,<a class="code" href="classv_process.html" title="This is the virtual base class for a system process, see cProcess.">vProcess</a> *lpLinked,uint32 liFilterType)
<a name="l00857"></a>00857 {
<a name="l00858"></a>00858         mpObject=0;
<a name="l00859"></a>00859         
<a name="l00860"></a>00860         mpOwner=0;
<a name="l00861"></a>00861         
<a name="l00862"></a>00862         mpLinked=0;
<a name="l00863"></a>00863         mpFollowing=0;
<a name="l00864"></a>00864         ProceduralObj=<span class="keyword">false</span>;
<a name="l00865"></a>00865 
<a name="l00866"></a>00866         
<a name="l00867"></a>00867         <a class="code" href="classc_collision_object.html#a4aaae58a85bd7c1e6b5601a4e4cac3c1">Initialise</a>(lpFollow,lpLinked,liFilterType);
<a name="l00868"></a>00868         <a class="code" href="classc_collision_object.html#ae465362052ff2026ed31c2fa3664d209" title="This will take a SphereCollision Object loaded from a file, and set this Collision Object to use it...">SetType</a>(lpFollow);
<a name="l00869"></a>00869 }
<a name="l00870"></a>00870 
<a name="l00871"></a><a class="code" href="classc_collision_object.html#a908a1cbe39b07c53849f60fecb5230dc">00871</a> <span class="keywordtype">void</span> <a class="code" href="classc_collision_object.html#a908a1cbe39b07c53849f60fecb5230dc">cCollisionObject::ClearProcedural</a>()
<a name="l00872"></a>00872 {
<a name="l00873"></a>00873         
<a name="l00874"></a>00874         
<a name="l00875"></a>00875         <span class="keywordflow">if</span>(<a class="code" href="classc_collision_object.html#a9d4e4fe61df1af3479247611d605e897">Procedural</a>() &amp;&amp; mpObject) <span class="keyword">delete</span> mpObject;
<a name="l00876"></a>00876         
<a name="l00877"></a>00877         mpObject=0;
<a name="l00878"></a>00878         miType=0;
<a name="l00879"></a>00879         <a class="code" href="classc_signal.html#a25c364b54cb364ed6e96366a3e06cf73">mbAwake</a>=<span class="keyword">false</span>;
<a name="l00880"></a>00880         
<a name="l00881"></a>00881 }
<a name="l00882"></a>00882 
<a name="l00883"></a><a class="code" href="classc_collision_object.html#a4aaae58a85bd7c1e6b5601a4e4cac3c1">00883</a> <span class="keywordtype">void</span> <a class="code" href="classc_collision_object.html#a4aaae58a85bd7c1e6b5601a4e4cac3c1">cCollisionObject::Initialise</a>(<a class="code" href="classv_render_object.html" title="virtual function for producing renderable objects. see cRenderObject.">vRenderObject</a> *lpFollow,<a class="code" href="classv_process.html" title="This is the virtual base class for a system process, see cProcess.">vProcess</a> *lpLinked,uint32 liFilterType)
<a name="l00884"></a>00884 {
<a name="l00885"></a>00885         
<a name="l00886"></a>00886         <a class="code" href="classc_collision_object.html#a908a1cbe39b07c53849f60fecb5230dc">ClearProcedural</a>();
<a name="l00887"></a>00887         
<a name="l00888"></a>00888         
<a name="l00889"></a>00889         <span class="keywordflow">if</span>(mpOwner){ <a class="code" href="classc_collision_handler.html#a1c4fee89d756b7c73dd877e732713f69" title="This will return a pointer to the classes current instance and if there is none it will create one...">cCollisionHandler::Instance</a>()-&gt;<a class="code" href="classc_collision_handler.html#ad2d0933b78c692a5d2b3885242fa0911" title="This will acutally remove the clinkedNode from the relevant list.">RemoveFromList</a>(mpOwner); mpOwner=0;}
<a name="l00890"></a>00890         
<a name="l00891"></a>00891         
<a name="l00892"></a>00892         <a class="code" href="classc_collision_object.html#a30475084c3b15f9bf8dc8818ed486c7d" title="This sets the process that this renderable object will return collision signals to.">SetLink</a>(lpLinked);
<a name="l00893"></a>00893         
<a name="l00894"></a>00894         miType=0;
<a name="l00895"></a>00895         <a class="code" href="classc_signal.html#a81f676eca534ecd98897fd9ec5d4ce7c">mbAlive</a>=<span class="keyword">true</span>;
<a name="l00896"></a>00896         <a class="code" href="classc_signal.html#a25c364b54cb364ed6e96366a3e06cf73">mbAwake</a>=<span class="keyword">false</span>;
<a name="l00897"></a>00897         <span class="keywordflow">if</span>(mpFollowing) mpFollowing-&gt;<a class="code" href="classv_render_object.html#a1cd8f4961222c39ecdfa5ca155699fa3" title="Links The cCollisionObject lpObj to this Renderable Object.">LinkCollisionObject</a>(0);
<a name="l00898"></a>00898         mpFollowing=lpFollow;
<a name="l00899"></a>00899         mpFollowing-&gt;<a class="code" href="classv_render_object.html#a1cd8f4961222c39ecdfa5ca155699fa3" title="Links The cCollisionObject lpObj to this Renderable Object.">LinkCollisionObject</a>(<span class="keyword">this</span>);
<a name="l00900"></a>00900         miID=liFilterType;
<a name="l00901"></a>00901         
<a name="l00902"></a>00902                         mpOwner=<a class="code" href="classc_collision_handler.html#a1c4fee89d756b7c73dd877e732713f69" title="This will return a pointer to the classes current instance and if there is none it will create one...">cCollisionHandler::Instance</a>()-&gt;<a class="code" href="classc_collision_handler.html#ae966359105ed5e144f62e36dd85d1f03" title="This will add the cCollisionObject pointed to by lpObject to the list mpList.">Add</a>(<span class="keyword">this</span>);
<a name="l00903"></a>00903         
<a name="l00904"></a>00904         
<a name="l00905"></a>00905 }
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>WTcCollisionObject.cpp</b>      </li>
      <li class="footer">Generated on Sun Sep 11 2011 13:58:39 for DivWin by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
