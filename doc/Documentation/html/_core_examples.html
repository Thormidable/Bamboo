<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DivWin: 3. The First Process</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DivWin&#160;<span id="projectnumber">1.0v</span></div>
   <div id="projectbrief">Games Engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('_core_examples.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>3. The First Process </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><p><a class="el" href="_w_tc_process_8h_source.html">WTcProcess.h</a></p>
<p>Using William Thorley’s Process system</p>
<p>The First Process is exactly the same as every other process. i.e. it must inherit <a class="el" href="classc_process.html" title="This is the base code for a process. This will automatically create a new process. It will hand itself to cKernel to be processed every frame. Any Processes created by the user should inherit this type to be handled by cKernel automatically. Initialisation code should go in the constructor of the user type. Linking to cKernel is performed automatically by cProcess. Update code should go in the function Run(). Destruction code should fo in the destructor of the user type. Code to handle interaction of two processes should go in either processes UserSignal() function.">cProcess</a>. What is special about the Process passed to the _START_PROGRAM() call is that it is the automatically called when the Kernel is initialized. This means that the loading code for cCore is the initialization code for the entire program. Usually the process’ which will form the program are started here as well as loading files for the system. For these examples I wil call the class cCore.</p>
<p>This shows the declaration for cCore. Using _PROCESS(Type) is the same as calling class Type : public <a class="el" href="classc_process.html" title="This is the base code for a process. This will automatically create a new process. It will hand itself to cKernel to be processed every frame. Any Processes created by the user should inherit this type to be handled by cKernel automatically. Initialisation code should go in the constructor of the user type. Linking to cKernel is performed automatically by cProcess. Update code should go in the function Run(). Destruction code should fo in the destructor of the user type. Code to handle interaction of two processes should go in either processes UserSignal() function.">cProcess</a> to inherit <a class="el" href="classc_process.html" title="This is the base code for a process. This will automatically create a new process. It will hand itself to cKernel to be processed every frame. Any Processes created by the user should inherit this type to be handled by cKernel automatically. Initialisation code should go in the constructor of the user type. Linking to cKernel is performed automatically by cProcess. Update code should go in the function Run(). Destruction code should fo in the destructor of the user type. Code to handle interaction of two processes should go in either processes UserSignal() function.">cProcess</a>. Declaration: </p>
<div class="fragment"><pre class="fragment"> _PROCESS(cCore)
 {
  <span class="keyword">public</span>:
  cCore();
 
  <span class="keywordtype">void</span> Run();
 
  ~cCore();
 
 <span class="keywordtype">void</span> AdditionalKillFunctionality();
 <span class="keywordtype">void</span> AdditionalSleepFunctionality();
 <span class="keywordtype">void</span> AdditionalWakeFunctionality();
 
 };
</pre></div><p>cCore(): This shows the constructor for cCore. As it is the first object it will load media for the rest of the program and kick off the other processes. </p>
<div class="fragment"><pre class="fragment"> cCore::cCore()
 {
 <span class="comment">//Load IMF Files into memory.</span>
  _LOAD_FILE(<span class="stringliteral">&quot;../src/User/Models/AShipModel.imf&quot;</span>);
  _LOAD_FILE(<span class="stringliteral">&quot;../src/User/Models/StartShip.imf&quot;</span>);
  _LOAD_FILE(<span class="stringliteral">&quot;../src/User/Textures/ATexture.imf&quot;</span>);
  _LOAD_FILE(<span class="stringliteral">&quot;../src/User/CollisionObjects/ACollision.imf&quot;</span>);
  _LOAD_FILE(<span class="stringliteral">&quot;../src/User/Objects/AIMFFileWithSeveralComponents.imf&quot;</span>);

 <span class="comment">// Setup the camera.</span>
  _CAMERA-&gt;Far(1000.0f);
  _CAMERA-&gt;Frustum();
 
 <span class="comment">//Create a new process and a renderable object.</span>
  mpProcessPointer=_CREATE(MyFirstProcess());
  mpRenderObjectPointer=_CREATE(MyFirstRenderObject());

 }
</pre></div><p>Run(): Run() is run once every frame as long as cCore is alive and controls the entire program. The Run() function should is explicity designed to be re-written by the user to give each <a class="el" href="classc_process.html" title="This is the base code for a process. This will automatically create a new process. It will hand itself to cKernel to be processed every frame. Any Processes created by the user should inherit this type to be handled by cKernel automatically. Initialisation code should go in the constructor of the user type. Linking to cKernel is performed automatically by cProcess. Update code should go in the function Run(). Destruction code should fo in the destructor of the user type. Code to handle interaction of two processes should go in either processes UserSignal() function.">cProcess</a> class their functionality. This Code can be seen as the behaviour that the process should follow. It should rotate and position the Process' Renderobjects, send signals, receive inputs, anything the Process may want to do as part of it's behaviour. The function cCore::Run() can be used like any other process, but is usually used to oversee the running of the program. </p>
<div class="fragment"><pre class="fragment"> <span class="keywordtype">void</span> cCore::Run()
 {

  <span class="keywordflow">if</span>(_KEY(KEY_SPACE)) _CAMERA-&gt;Far(10.0f);
   <span class="keywordflow">else</span> _CAMERA-&gt;Far(1000.0f);
  _CAMERA-&gt;Frustum();

  mpProcessPointer=_CREATE(MyFirstProcess());
  mpRenderObjectPointer=_CREATE(MYFirstRenderObject());

 }
</pre></div><p>~cCore(): This is called when the object is deleted, not when it is killed. It is difficult to predict reliably where this will be called, so it is best not to put code in this function.</p>
<p>AdditionalKillFunctionality(): This is called whenever the cCore Process is Killed. This will only activate if the process was alive and is now dead. This should be used to kill or transfer control of Render Objects that are owned by this process, or unload files that are no longer used.</p>
<div class="fragment"><pre class="fragment"> *<span class="keywordtype">void</span> cCore::AdditionalKillFunctionality()
 *{
 _KILL(mpRenderObjectPointer);
 mpProcessPointer_SIGNAL(_S_SLEEP);
         *}
         *
</pre></div><p>AdditionalSleepFunctionality(): This is called whenever the cCore Process is made to Sleep. This will only activate if the process was awake and is now asleep. This is generally used to sleep Render Objects that are owned by this process.</p>
<div class="fragment"><pre class="fragment">         *<span class="keywordtype">void</span> cCore::AdditionalSleepFunctionality()
         *{
 mpRenderObjectPointer-&gt;Signal(_S_SLEEP);
                 *}
                 *
</pre></div><p>AdditionalWakeFunctionality(): This is called whenever the cCore Process is made to Wake. This will only activate if the process was asleep and is now awake. This is generally used to wake Render Objects that were slept when cCore was sent to sleep.</p>
<p>void cCore::AdditionalSleepFunctionality() { mpRenderObjectPointer-&gt;Signal(_S_WAKE); }  </p>
</div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">Generated on Sun Sep 11 2011 13:58:40 for DivWin by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
