<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Bamboo: Examples of Games Code</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Bamboo&#160;<span id="projectnumber">v1.1</span></div>
   <div id="projectbrief">Process Orientated Game Engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Examples of Games Code </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>This section will give a series of examples of programs for games. Initially they will be very simple. Later examples will show expanded functionality.</p>
<ol type="1">
<li><a class="el" href="_code_program_examples.html#BouncingBallExample">Example of a bouncing ball</a></li>
<li><a class="el" href="_code_program_examples.html#ThreeDimensionBouncingBallExample">Example of a ball bouncing in 3 Dimensions</a></li>
<li><a class="el" href="_code_program_examples.html#SoundBouncingBallExample">Example of a bouncing ball with a bounce sound</a></li>
<li><a class="el" href="_code_program_examples.html#BulletsBouncingBallExample">Making the camera controllable. Adding bullets</a></li>
<li><a class="el" href="_code_program_examples.html#CollisionsBouncingBallExample">Example with Bullet and Ball collisions</a></li>
<li><a class="el" href="_code_program_examples.html#ReSpwaningBouncingBallExample">Example of Signals. Giving a continual supply of targets.</a></li>
<li><a class="el" href="_code_program_examples.html#CompleteNoCommentsBouncingBallExample">Previous Example without comments</a></li>
</ol>
<h2><a class="anchor" id="BouncingBallExample"></a>
Example of a bouncing ball.</h2>
<p>So lets start with a bouncing ball. This ball will bounce up and down on a plane going through Y = 0. When using Bamboo Programs the ESC key is automatically tagged to exit the program.</p>
<div class="fragment"><pre class="fragment"> <span class="comment">//Declare a new type of Process cCore.</span>
 <span class="comment">//class cCore : public cProcess</span>
 _PROCESS(cCore)
 {
 <span class="keyword">public</span>:
 <span class="comment">//Create pointer so cCore can  access the object it creates.</span>
 <a class="code" href="classc_model.html" title="A standard Textured Model renderable object.">cModel</a> *BallPointer;

 <span class="keywordtype">float</span> BallSpeed;

  <span class="comment">//Constructor - Initialisation code.</span>
        cCore()
        {
        <span class="comment">//Load the imf pack with objects for demonstration 1.</span>
        <span class="comment">//This contains a renderable spherical mesh called BallModel.</span>
        <span class="comment">//This contains a texture called BallTexture.</span>
        <span class="comment">//This also contains a shader called TexturingProgram.</span>
                 _LOAD_FILE( <span class="stringliteral">&quot;Demonstration1.imf&quot;</span> );

        <span class="comment">//Create a Textured Model to put the ball on screen.</span>
                BallPointer =  _CREATE(<a class="code" href="classc_model.html" title="A standard Textured Model renderable object.">cModel</a>);

        <span class="comment">//Set the mesh it will use.</span>
                BallPointer -&gt; Mesh( <span class="stringliteral">&quot;BallModel&quot;</span> );

        <span class="comment">//Set the Texture it will use.</span>
                BallPointer -&gt; Texture( <span class="stringliteral">&quot;BallTexture&quot;</span> );

        <span class="comment">//Set the Shader it will use.</span>
                BallPointer -&gt; Shader( <span class="stringliteral">&quot;TexturingProgram&quot;</span> );

        <span class="comment">//Set a start position.</span>
        <span class="comment">//This is relative to the camera.</span>
        <span class="comment">// The first value is left and right position of the object.</span>
        <span class="comment">// The second value is up and down position of the object.</span>
        <span class="comment">// The third value is forwards nd backwards.</span>
                BallPointer -&gt; Position( 0.0 , 20.0 , 30.0 );

        <span class="comment">//The ball has been placed 30 units in front of the camera.</span>
        <span class="comment">//The ball has been placed 20 units up from the camera.</span>

        <span class="comment">//Set the ball so it is not moving at the start.</span>
                BallSpeed = 0.0;
        };

        <span class="comment">//This function will update the balls position every process cycle.</span>
        <span class="keywordtype">void</span> Run()
        {
                <span class="comment">//Increase the balls speed downwards by a small amount.</span>
                        BallSpeed = BallSpeed - 0.01;

                <span class="comment">//Advance the Ball by its speed.</span>
                <span class="comment">//This uses the Global Y Axis as BallSpeed.</span>
                <span class="comment">//BallSpeed stores the balls speed.</span>
                <span class="comment">//A Local Advance would be affected by rotations.</span>
                <span class="comment">//A Global Advance will not.</span>
                        BallPointer -&gt; GAdvanceY( BallSpeed );

                <span class="comment">//If the ball is closer to the &#39;ground&#39; than its radius</span>
                <span class="comment">//then it has collided with the floor.</span>
                <span class="comment">//We will assume it has no radius to make this easier to follow.</span>
                <span class="comment">//This means the centre of the ball will touch the &#39;ground&#39;</span>
                <span class="keywordflow">if</span>( BallPointer -&gt; Y()  &lt; 0.0 )
                {
                        <span class="comment">//If the ball touched the ground</span>
                        <span class="comment">//it must be moving downwards</span>
                        <span class="comment">//so make the Ballspeed positive</span>
                        <span class="comment">//Making it bounce.</span>
                        <span class="comment">//abs() is a function which will return a positive value</span>
                        <span class="comment">//whether it was negative or not before.</span>
                        <span class="comment">//This will make the ball always bounce to the same height.</span>
                                BallSpeed = abs( BallSpeed );

                        <span class="comment">//Changing the above line of code</span>
                        <span class="comment">//to the following line of code will reduce</span>
                        <span class="comment">//the height the ball bounces with each bounce.</span>
                        <span class="comment">//BallSpeed = abs( BallSpeed ) * 0.9 ;</span>
                }
        };

        <span class="keywordtype">void</span> Stop()
        {
                <span class="comment">//When this dies we want the ball to disappear.</span>
                        _KILL( BallPointer );

                <span class="comment">//Stop BallPointer pointing at the model as it has been killed.</span>
                        BallPointer = 0;
        };
};
</pre></div> <h2><a class="anchor" id="ThreeDimensionBouncingBallExample"></a>
Example of a ball bouncing in 3 Dimensions.</h2>
<p>Now lets enclose it in a box of size +/- 30 about 0,0,0 (The boundaries are</p>
<ul>
<li>X: -30 / 30</li>
<li>Y: -30 / 30</li>
<li>Z: -30 / 30 Lets also start it moving in a random direction.</li>
</ul>
<div class="fragment"><pre class="fragment"> <span class="comment">//Declare a new type of Process cCore.</span>
 <span class="comment">//class cCore : public cProcess</span>
 _PROCESS(cCore)
 {
 <span class="keyword">public</span>:
 <span class="comment">//Create pointer so cCore can  access the object it creates.</span>
 <a class="code" href="classc_model.html" title="A standard Textured Model renderable object.">cModel</a> *BallPointer;

 <span class="comment">//Create a variable for each dimension the ball moves in.</span>
 <span class="comment">//This could be a c3DVf which is a 3 dimensional vector</span>
 <span class="keywordtype">float</span> BallSpeedX;
 <span class="keywordtype">float</span> BallSpeedY;
 <span class="keywordtype">float</span> BallSpeedZ;

  <span class="comment">//Constructor - Initialisation code.</span>
        cCore()
        {

        <span class="comment">//Load the imf pack with objects for demonstration 1.</span>
        <span class="comment">//This contains a renderable spherical mesh called BallModel.</span>
        <span class="comment">//This contains a texture called BallTexture.</span>
        <span class="comment">//This also contains a shader called TexturingProgram.</span>
         _LOAD_FILE( <span class="stringliteral">&quot;Demonstration1.imf&quot;</span> );

        <span class="comment">//Create a Textured Model to put the ball on screen.</span>
        BallPointer =  _CREATE(<a class="code" href="classc_model.html" title="A standard Textured Model renderable object.">cModel</a>);

        <span class="comment">//Set the mesh it will use.</span>
        BallPointer -&gt; Mesh( <span class="stringliteral">&quot;BallModel&quot;</span> );

        <span class="comment">//Set the Texture it will use.</span>
        BallPointer -&gt; Texture( <span class="stringliteral">&quot;BallTexture&quot;</span> );

        <span class="comment">//Set the Shader it will use.</span>
        BallPointer -&gt; Shader( <span class="stringliteral">&quot;TexturingProgram&quot;</span> );

        <span class="comment">//Set a start position.</span>
        <span class="comment">//This is relative to the camera.</span>
        <span class="comment">// The first value is left and right position of the object.</span>
        <span class="comment">// The second value is up and down position of the object.</span>
        <span class="comment">// The third value is forwards and backwards.</span>
        BallPointer -&gt; Position( 0.0 , 0.0 , 0.0 );

        <span class="comment">//Move the camera back 60 units so it is outside the box.</span>
        <span class="comment">//It will look forwards and so look at the ball.</span>
        _CAMERA -&gt; Position (0.0 , 0.0 , -60);

        <span class="comment">//Set the ball to move in a random direction at 0.1 units per frame</span>
        <span class="comment">//RANDOM_NUMBER is a random float between 0.0 and 1.0.</span>
        BallSpeedX = RANDOM_NUMBER * 0.1;
        BallSpeedY = RANDOM_NUMBER * 0.1;
        BallSpeedZ = RANDOM_NUMBER * 0.1;

        };

        <span class="comment">//This function will update the balls position every process cycle.</span>
        <span class="keywordtype">void</span> Run()
        {
                <span class="comment">//Increase the balls speed downwards by a small amount.</span>
                BallSpeedY = BallSpeedY - 0.01;

                        <span class="comment">//Advance the Ball by its speed in all three Global axis.</span>
                        <span class="comment">//This is global as mentioned in the last example.</span>
                BallPointer -&gt; GAdvance( BallSpeedX , BallSpeedY , BallSpeedZ );

                <span class="comment">//If the ball is outside any of the boundaries</span>
                <span class="comment">//reverse its direction in the appriopriate axis.</span>
                <span class="comment">//This is the same as previously, but with 6 boundaries instead of 1.</span>
                <span class="keywordflow">if</span>( BallPointer -&gt; X()  &lt; - 30.0 )
                {
                        BallSpeedX = abs( BallSpeedX );
                }
                <span class="keywordflow">if</span>( BallPointer -&gt; X()  &gt;  30.0 )
                {
                        BallSpeedX = -abs( BallSpeedX );
                }

                <span class="keywordflow">if</span>( BallPointer -&gt; Y()  &lt; - 30.0 )
                {
                        BallSpeedY = abs( BallSpeedY );
                }
                <span class="keywordflow">if</span>( BallPointer -&gt; Y()  &gt;  30.0 )
                {
                        BallSpeedY = -abs( BallSpeedY );
                }

                <span class="keywordflow">if</span>( BallPointer -&gt; Z()  &lt; - 30.0 )
                {
                        BallSpeedZ = abs( BallSpeedZ );
                }
                <span class="keywordflow">if</span>( BallPointer -&gt; Z()  &gt;  30.0 )
                {
                        BallSpeedZ = -abs( BallSpeedZ );
                }

        };

        <span class="keywordtype">void</span> Stop()
        {
                <span class="comment">//When this dies we want the ball to disappear.</span>
                _KILL(BallPointer);
                <span class="comment">//Stop BallPointer pointing at the model as it is killed.</span>
                BallPointer = 0;
        };
};
</pre></div> <h2><a class="anchor" id="SoundBouncingBallExample"></a>
Example of a bouncing ball with a bounce sound.</h2>
<p>Lets take the program we used before and give it a bounce sound.</p>
<div class="fragment"><pre class="fragment"> <span class="comment">//Declare a new type of Process cCore.</span>
 _PROCESS(cCore)
 {
 <span class="keyword">public</span>:
 <span class="comment">//Create pointer so cCore can  access the object it creates.</span>
 <a class="code" href="classc_model.html" title="A standard Textured Model renderable object.">cModel</a> *BallPointer;

 <span class="comment">//Create a pointer so cCore can play the bounce sound.</span>
 <a class="code" href="classc_audio_object.html" title="This class will allow a sound to be played. This class will link an audio source and a buffer...">cAudioObject</a> *BallBounce;

 <span class="comment">//Create a variable for each dimension the ball moves in.</span>
 <span class="comment">//This could be a c3DVf which is a 3 dimensional vector</span>
 <a class="code" href="classc3_d_vf.html" title="This is a 3 dimensional float vector object.">c3DVf</a> BallSpeed;

  <span class="comment">//Constructor - Initialisation code.</span>
        cCore()
        {
        <span class="comment">//Load the imf pack with objects for demonstration 2.</span>
        <span class="comment">//This contains a renderable spherical mesh called BallModel.</span>
        <span class="comment">//This contains a texture called BallTexture.</span>
        <span class="comment">//This also contains a shader called TexturingProgram.</span>
        <span class="comment">//This also contains a bounce sound called BounceSound.</span>
                 _LOAD_FILE( <span class="stringliteral">&quot;Demonstration2.imf&quot;</span> );

        <span class="comment">//Create a Textured Model to put the ball on screen.</span>
                BallPointer =  _CREATE(<a class="code" href="classc_model.html" title="A standard Textured Model renderable object.">cModel</a>);

        <span class="comment">//Set the mesh it will use.</span>
                BallPointer -&gt; Mesh( <span class="stringliteral">&quot;BallModel&quot;</span> );

        <span class="comment">//Set the Texture it will use.</span>
                BallPointer -&gt; Texture( <span class="stringliteral">&quot;BallTexture&quot;</span> );

        <span class="comment">//Set the Shader it will use.</span>
                BallPointer -&gt; Shader( <span class="stringliteral">&quot;TexturingProgram&quot;</span> );

        <span class="comment">//Set a start position.</span>
        <span class="comment">//This is relative to the camera.</span>
        <span class="comment">// The first value is left and right position of the object.</span>
        <span class="comment">// The second value is up and down position of the object.</span>
        <span class="comment">// The third value is forwards and backwards.</span>
                BallPointer -&gt; Position( 0.0 , 0.0 , 0.0 );

        <span class="comment">//Set the ball to move in a random direction at 0.1 units per frame</span>
        <span class="comment">//RANDOM_NUMBER is a random float between 0.0 and 1.0.</span>

        <span class="comment">//Because this is an instance</span>
    <span class="comment">//(not a Bamboo engine object)</span>
    <span class="comment">//it should be accessed using the dot operator.</span>
                BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>( RANDOM_NUMBER * 0.1 );
                BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>( RANDOM_NUMBER * 0.1 );
                BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>( RANDOM_NUMBER * 0.1 );

        <span class="comment">//Create an audio file for playing the bounce sound.</span>
                BallBounce = _CREATE(<a class="code" href="classc_audio_object.html" title="This class will allow a sound to be played. This class will link an audio source and a buffer...">cAudioObject</a>);

        <span class="comment">//Create Buffer the sound we want to play into the cAudioObject.</span>
                BallBounce -&gt; Buffer ( <span class="stringliteral">&quot;BallSound&quot;</span> );

        };

        <span class="comment">//This is the function that will update the balls position every process cycle.</span>
        <span class="keywordtype">void</span> Run()
        {
                <span class="comment">//Increase the balls speed downwards by a small amount.</span>
                        BallSpeedY = BallSpeedY - 0.01;

                <span class="comment">//Advance the Ball by its speed in all three Global axis.</span>
                        BallPointer -&gt; GAdvance( BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>() , BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>() , BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>() );

                <span class="comment">//If the ball is outside any of the boundaries.</span>
                <span class="comment">//There are much more concise ways of doing this but this is the clearest.</span>
                <span class="comment">//This is the same as previously, but with 6 boundaries instead of 1.</span>
                <span class="keywordflow">if</span>( BallPointer -&gt; X()  &lt; - 30.0  || BallPointer -&gt; X() &gt; 30.0)
                {
                        BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>( -BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>() ) ;
                        BallBounce -&gt; Play();
                }
                <span class="keywordflow">if</span>( BallPointer -&gt; Y()  &lt; - 30.0  || BallPointer -&gt; Y() &gt; 30.0)
                {
                        BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>( -BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>() ) ;
                        BallBounce -&gt; Play();
                }
                <span class="keywordflow">if</span>( BallPointer -&gt; Z()  &lt; - 30.0  || BallPointer -&gt; Z() &gt; 30.0)
                {
                        BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>( -BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>() ) ;
                        BallBounce -&gt; Play();
                }

        };

        <span class="keywordtype">void</span> Stop()
        {

                <span class="comment">//When this dies we want the ball to disappear.</span>
                        _KILL(BallPointer);
                        _KILL(BallSound);

                <span class="comment">//Stop BallPointer pointing at the model as it is killed.</span>
                        BallPointer = 0;
                        BallSound = 0;
        };
};
</pre></div> <h2><a class="anchor" id="BulletsBouncingBallExample"></a>
Making the camera controllable. Adding bullets.</h2>
<p>Lets let the mouse control the camera. Lets also allow the user to spawn bullets to shoot at the ball. We will be making new processes so I will divide it into 3 processes.</p>
<ul>
<li>The cCore process which loads files, controls the camera and spawns the other processes.</li>
<li>The cBall Process which will control the ball.</li>
<li>The cBullet Process which will control an individual bullet.</li>
</ul>
<div class="fragment"><pre class="fragment"><span class="comment">//Declare and Define a process for controlling the ball.</span>
<span class="comment">//class cBall : public cProcess</span>
 _PROCESS(cBall)
 {
 <span class="keyword">public</span>:
 <span class="comment">//Create pointer so cCore can  access the object it creates.</span>
 <a class="code" href="classc_model.html" title="A standard Textured Model renderable object.">cModel</a> *BallPointer;

 <span class="comment">//Create a pointer so cCore can play the bounce sound.</span>
 <a class="code" href="classc_audio_object.html" title="This class will allow a sound to be played. This class will link an audio source and a buffer...">cAudioObject</a> *BallBounce;

 <span class="comment">//Create a variable for each dimension the ball moves in.</span>
 <span class="comment">//This could be a c3DVf which is a 3 dimensional vector</span>
 <a class="code" href="classc3_d_vf.html" title="This is a 3 dimensional float vector object.">c3DVf</a> BallSpeed;

  <span class="comment">//Constructor - Initialisation code.</span>
        cBall()
        {
                <span class="comment">//Note the media will have been loaded in cCore.</span>
                <span class="comment">//Since cCore will create this process</span>
                <span class="comment">//media will be loaded before we get to this point.</span>
                <span class="comment">//Create a Textured Model to put the ball on screen.</span>
        BallPointer =  _CREATE( <a class="code" href="classc_model.html" title="A standard Textured Model renderable object.">cModel</a> );

                <span class="comment">//Set the mesh it will use.</span>
        BallPointer -&gt; Mesh( <span class="stringliteral">&quot;BallModel&quot;</span> );

                <span class="comment">//Set the Texture it will use.</span>
        BallPointer -&gt; Texture( <span class="stringliteral">&quot;BallTexture&quot;</span> );

                <span class="comment">//Set the Shader it will use.</span>
        BallPointer -&gt; Shader( <span class="stringliteral">&quot;TexturingProgram&quot;</span> );

                <span class="comment">//Set a start position.</span>
                <span class="comment">//This is relative to the camera.</span>
                <span class="comment">// The first value is left and right position of the object.</span>
                <span class="comment">// The second value is up and down position of the object.</span>
                <span class="comment">// The third value is forwards and backwards.</span>
        BallPointer -&gt; Position( 0.0 , 0.0 , 0.0 );

                <span class="comment">//Move the camera back 60 units so it is outside the box and looking at the ball.</span>
        _CAMERA -&gt; Position (0.0 , 0.0 , -60);

                <span class="comment">//Set the ball to move in a random direction at 0.1 units per frame</span>
                <span class="comment">//RANDOM_NUMBER is a random float between 0.0 and 1.0.</span>
                <span class="comment">//Because this is an instance</span>
                <span class="comment">//(not a Bamboo engine object)</span>
                <span class="comment">//it should be accessed using the dot operator.</span>

        BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>( RANDOM_NUMBER * 0.1 );
        BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>( RANDOM_NUMBER * 0.1 );
        BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>( RANDOM_NUMBER * 0.1 );

        <span class="comment">//Create an audio file for playing the bounce sound.</span>
        BallBounce = _CREATE(<a class="code" href="classc_audio_object.html" title="This class will allow a sound to be played. This class will link an audio source and a buffer...">cAudioObject</a>);

        <span class="comment">//Create Buffer the sound we want to play into the cAudioObject.</span>
        BallBounce -&gt; Buffer ( <span class="stringliteral">&quot;BallSound&quot;</span> );

        };

        <span class="comment">//This is the function that will update the balls position every process cycle.</span>
        <span class="keywordtype">void</span> Run()
        {
                <span class="comment">//Increase the balls speed downwards by a small amount.</span>
                BallSpeedY = BallSpeedY - 0.01;

                <span class="comment">//Advance the Ball by its speed in all three Global axis.</span>
                BallPointer -&gt; GAdvance( BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>() , BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>() , BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>() );

                <span class="comment">//If the ball is outside any of the boundaries.</span>
                <span class="comment">//Reverse it&#39;s direction in that axis</span>
                <span class="keywordflow">if</span>( BallPointer -&gt; X()  &lt; - 30.0  || BallPointer -&gt; X() &gt; 30.0)
                {
                        BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>( -BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>() ) ;
                        BallBounce -&gt; Play();
                }
                <span class="keywordflow">if</span>( BallPointer -&gt; Y()  &lt; - 30.0  || BallPointer -&gt; Y() &gt; 30.0)
                {
                        BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>( -BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>() ) ;
                        BallBounce -&gt; Play();
                }
                <span class="keywordflow">if</span>( BallPointer -&gt; Z()  &lt; - 30.0  || BallPointer -&gt; Z() &gt; 30.0)
                {
                        BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>( -BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>() ) ;
                        BallBounce -&gt; Play();
                }

        };

        <span class="keywordtype">void</span> Stop()
        {
                <span class="comment">//When this dies we want the ball to disappear.</span>
                _KILL(BallPointer);
                _KILL(BallSound);

                <span class="comment">//Stop BallPointer pointing at the model as it is killed.</span>
                BallPointer = 0;
                BallSound = 0;
        };
};

<span class="comment">//Create a new process to be our bullets.</span>
<span class="comment">//class cBullet : public cProcess</span>
_PROCESS(cBullet)
{
 <span class="keyword">public</span>:

  <span class="comment">//Give this a pointer to a render object.</span>
  <a class="code" href="classc_point.html" title="A Renderable object for rendering single points.">cPoint</a> *RenderPoint;

  <span class="comment">//Give this a float to count the bullets lifespan</span>
  <span class="comment">//This is a good idea as processes will run for ever unless limited by code.</span>
  <span class="comment">//Every process takes some small amount of CPU time.</span>
  <span class="comment">//Processes which stop having a use should be killed.</span>
  <span class="comment">//Some processes will want to run for ever.</span>
  <span class="comment">//Eventually bullets will leave the area they can do anything</span>
  <span class="comment">//As such it is worth considering a life span for them</span>
  <span class="keywordtype">float</span> Life;

   cBullet(<a class="code" href="classc_camera_matrix4.html" title="This is a translation matrix for a camera object A Special Matric for Cameras. All the translations a...">cCameraMatrix4</a> *MatrixMatch)
   {
                <span class="comment">//Create a point object for this object.</span>
                RenderPoint = _CREATE( <a class="code" href="classc_point.html" title="A Renderable object for rendering single points.">cPoint</a> );

                <span class="comment">//Make this start with the same transalation as the camera.</span>
                RenderPoint -&gt; Copy( MatrixMatch );

                <span class="comment">//Give this point a shader to use.</span>
                RenderPoint -&gt; Shader( <span class="stringliteral">&quot;BasicProgram&quot;</span> );

                <span class="comment">//Give this bullet a life span.</span>
                Life = 100.0;
   };

   <span class="keywordtype">void</span> Run()
   {
                <span class="comment">//Make the bullet move in the direction it is moving.</span>
                RenderPoint -&gt; AdvanceZ( 0.01 );

                <span class="comment">//Reduce the bullets remaining life.</span>
                <span class="comment">//Eventually it will have run out of life.</span>
                Life = Life - 0.1;

                <span class="comment">//If the bullet has run out of life it should be killed</span>
                <span class="keywordflow">if</span>( Life &lt; 0.0 )
                {
                        <span class="comment">//Kill this bullet.</span>
                        _KILL_THIS();

                        <span class="comment">//As we know this bullet is dying we can kill the point.</span>
                        _KILL( RenderPoint );

                        <span class="comment">//Since RenderPoint is being killed</span>
                        <span class="comment">//We don&#39;t want to use its pointer any more.</span>
                        RenderPoint = 0;
                }
   };

   <span class="keywordtype">void</span> Stop()
   {
                <span class="comment">//If something else killed this bullet RenderPoint is not dead.</span>
                <span class="comment">//If this bullet killed itself, RenderPoint is 0.</span>
                <span class="comment">//You Should not use a pointer when it is zero.</span>
                <span class="keywordflow">if</span>(RenderPoint != 0)
                {
                        <span class="comment">//Kill RenderPoint.</span>
                        _KILL( RenderPoint );

                        <span class="comment">//Stop Pointing at the cPoint Object.</span>
                        RenderPoint = 0;
                }
   };
};

 <span class="comment">//Declare a new type of Process cCore.</span>
<span class="comment">//A Single instance of this process will be created</span>
<span class="comment">// by the engine at the start of the program.</span>
<span class="comment">//class cCore : public cProcess</span>
 _PROCESS(cCore)
 {
  <span class="keyword">public</span>:
        cCore()
        {
        <span class="comment">//Load the imf pack with objects for demonstration 3.</span>
        <span class="comment">//This contains a renderable spherical mesh called BallModel.</span>
        <span class="comment">//This contains a texture called BallTexture.</span>
        <span class="comment">//This also contains a shader called TexturingProgram.</span>
        <span class="comment">//This also contains a bounce sound called BounceSound.</span>
        <span class="comment">//This also contains a second shader called BasicProgram.</span>
                _LOAD_FILE( <span class="stringliteral">&quot;Demonstration3.imf&quot;</span> );

        <span class="comment">//Move the camera back 60 units so it is outside the box and looking at the ball.</span>
                _CAMERA -&gt; Position (0.0 , 0.0 , -60);

        <span class="comment">//Create a cBall Object.</span>
                _CREATE(cBall);

        };

        <span class="keywordtype">void</span> Run()
        {
                <span class="comment">//Change the Yaw by the change in the mouse position.</span>
                <span class="comment">//Multiply by a small value to slow it down.</span>
                        _CAMERA -&gt; RotateY( _MOUSE-&gt;XSpeed() * 0.01 );

                <span class="comment">//Change the Pitch by the change in the mouse position.</span>
                <span class="comment">//Multiply by a small value to slow it down.</span>
                        _CAMERA -&gt; RotateZ( _MOUSE-&gt;YSpeed() * 0.01 );

                <span class="comment">//If the left mouse button is clicked - Fire bullets</span>
                <span class="keywordflow">if</span>( _MOUSE -&gt; Left() )
                {
                        <span class="comment">//Create Our bullets</span>
                                _CREATE( cBullet( _CAMERA ) );
                }
        };

        <span class="keywordtype">void</span> Stop()
        {

        };


 };
</pre></div> <h2><a class="anchor" id="CollisionsBouncingBallExample"></a>
Example with Bullet and Ball collisions.</h2>
<p>Lets add collisions so we can detect collisions between the Ball and the bullets. For now we will just kill the ball. We should also limit how fast the bullets can be fired. </p>
<div class="fragment"><pre class="fragment"><span class="comment">//Declare and Define a process for controlling the ball.</span>
<span class="comment">//class cBall : public cBall</span>
 _PROCESS(cBall)
 {
 <span class="keyword">public</span>:
 <span class="comment">//Create pointer so cCore can  access the object it creates.</span>
 <a class="code" href="classc_model.html" title="A standard Textured Model renderable object.">cModel</a> *BallPointer;

 <span class="comment">//Create a pointer so cCore can play the bounce sound.</span>
 <a class="code" href="classc_audio_object.html" title="This class will allow a sound to be played. This class will link an audio source and a buffer...">cAudioObject</a> *BallBounce;

 <span class="comment">//Create a new Collision Object</span>
 <a class="code" href="classc_collision_object.html" title="This Object is the base object for detecting collisions. This object should be created and passed a p...">cCollisionObject</a> *BallCollision;

 <span class="comment">//Create a variable for each dimension the ball moves in.</span>
 <span class="comment">//This could be a c3DVf which is a 3 dimensional vector</span>
 <a class="code" href="classc3_d_vf.html" title="This is a 3 dimensional float vector object.">c3DVf</a> BallSpeed;

  <span class="comment">//Constructor - Initialisation code.</span>
        cBall()
        {
                <span class="comment">//Note the media will have been loaded in cCore.</span>
                <span class="comment">//Since cCore Creates this process media will be loaded before we get to this point.</span>
                <span class="comment">//Create a Textured Model to put the ball on screen.</span>
        BallPointer =  _CREATE(<a class="code" href="classc_model.html" title="A standard Textured Model renderable object.">cModel</a>);
                <span class="comment">//Set the mesh it will use.</span>
        BallPointer -&gt; Mesh( <span class="stringliteral">&quot;BallModel&quot;</span> ) );
                <span class="comment">//Set the Texture it will use.</span>
        BallPointer -&gt; Texture( _GET_MESH_FILE( <span class="stringliteral">&quot;BallTexture&quot;</span> ) );
                <span class="comment">//Set the Shader it will use.</span>
        BallPointer -&gt; Shader( _GET_SHADER_FILE( <span class="stringliteral">&quot;TexturingProgram&quot;</span> ) );

                <span class="comment">//Set a start position.</span>
                <span class="comment">//This is relative to the camera.</span>
                <span class="comment">// The first value is left and right position of the object.</span>
                <span class="comment">// The second value is up and down position of the object.</span>
                <span class="comment">// The third value is forwards and backwards.</span>
                <span class="comment">// Position it randomly between -20 and +20 on each axis.</span>
        BallPointer -&gt; Position( ZEROED_RANDOM_NUMBER * 20 , ZEROED_RANDOM_NUMBER * 20 , ZEROED_RANDOM_NUMBER * 20 );

                <span class="comment">//Create a Collision Object to enable collisions for the Ball.</span>
                <span class="comment">//Have it follow the position of the Ball.</span>
                <span class="comment">//Have it linked to this process.</span>
        BallCollision = _CREATE( <a class="code" href="classc_collision_object.html" title="This Object is the base object for detecting collisions. This object should be created and passed a p...">cCollisionObject</a>( BallPointer , <span class="keyword">this</span> ) );

                <span class="comment">//Set Type will set the type of collision. By handing it values it will generate an object at run time.</span>
                <span class="comment">//A Single float will make it a sphere of the specified radius.</span>
        BallCollision -&gt; SetType( 1.0 );

                <span class="comment">//We also need to set the filter value for the collision. This is important to maintain the speed of collision detection.</span>
                <span class="comment">//This means that this collision object will be checked under the value 1.</span>
        BallCollision -&gt; CollisionFilter( 1 );

                <span class="comment">//Move the camera back 60 units so it is outside the box and looking at the ball.</span>
        _CAMERA -&gt; Position (0.0 , 0.0 , -60);

                <span class="comment">//Set the ball to move in a random direction at 0.1 units per frame</span>
                <span class="comment">//RANDOM_NUMBER is a random float between 0.0 and 1.0.</span>
                <span class="comment">//Because this is an instance (not a Bamboo engine object) it should be accessed using the dot operator.</span>
        BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>( RANDOM_NUMBER * 0.1 );
        BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>( RANDOM_NUMBER * 0.1 );
        BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>( RANDOM_NUMBER * 0.1 );

        <span class="comment">//Create an audio file for playing the bounce sound.</span>
        BallBounce = _CREATE(<a class="code" href="classc_audio_object.html" title="This class will allow a sound to be played. This class will link an audio source and a buffer...">cAudioObject</a>);
        <span class="comment">//Create Buffer the sound we want to play into the cAudioObject.</span>
        BallBounce -&gt; Buffer (_GET_AUDIO_FILE( <span class="stringliteral">&quot;BallSound&quot;</span> );

        };

        <span class="comment">//This is the function that will update the balls position every process cycle.</span>
        <span class="keywordtype">void</span> Run()
        {
                <span class="comment">//Increase the balls speed downwards by a small amount.</span>
                BallSpeedY = BallSpeedY - 0.01;

                        <span class="comment">//Advance the Ball by its speed in all three Global axis.</span>
                        <span class="comment">//If this was a Local axis you would not notice a change until you rotated the ball around.</span>
                BallPointer -&gt; GAdvance( BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>() , BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>() , BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>() );

                        <span class="comment">//If the ball is outside any of the boundaries.</span>
                        <span class="comment">//There are much more concise ways of doing this but this is the clearest.</span>
                        <span class="comment">//This is exactly the same as previously, but with 6 boundaries instead of 1.</span>
                <span class="keywordflow">if</span>( BallPointer -&gt; X()  &lt; - 30.0  || BallPointer -&gt; X() &gt; 30.0)
                {
                        BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>( -BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>() ) ;
                        BallBounce -&gt; Play();
                }
                <span class="keywordflow">if</span>( BallPointer -&gt; Y()  &lt; - 30.0  || BallPointer -&gt; Y() &gt; 30.0)
                {
                        BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>( -BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>() ) ;
                        BallBounce -&gt; Play();
                }
                <span class="keywordflow">if</span>( BallPointer -&gt; Z()  &lt; - 30.0  || BallPointer -&gt; Z() &gt; 30.0)
                {
                        BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>( -BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>() ) ;
                        BallBounce -&gt; Play();
                }

        };

        <span class="keywordtype">void</span> Stop()
        {
                        <span class="comment">//When this dies we want the ball to disappear.</span>
                _KILL(BallPointer);
                _KILL(BallSound);
                        <span class="comment">//Stop BallPointer pointing at the model as it has been killed.</span>
                BallPointer = 0;
                BallSound = 0;
        };
};


_PROCESS(cBullet)
{
 <span class="keyword">public</span>:
        <span class="comment">//Create a cPoint pointer for accessing the bullet render object.</span>
  <a class="code" href="classc_point.html" title="A Renderable object for rendering single points.">cPoint</a> *RenderPoint;

        <span class="comment">//Create a cCollisionObject for bullet collisions.</span>
  <a class="code" href="classc_collision_object.html" title="This Object is the base object for detecting collisions. This object should be created and passed a p...">cCollisionObject</a> *PointCollision;

   <span class="comment">//Variable to stre the remaining lifespan of the bullet</span>
  <span class="keywordtype">float</span> Life;

   cBullet(<a class="code" href="classc_camera_matrix4.html" title="This is a translation matrix for a camera object A Special Matric for Cameras. All the translations a...">cCameraMatrix4</a> *MatrixMatch)
   {
                <span class="comment">//Create a point object for this object.</span>
                RenderPoint = _CREATE( <a class="code" href="classc_point.html" title="A Renderable object for rendering single points.">cPoint</a> );

                <span class="comment">//Make this start with the same transalation as the camera.</span>
                RenderPoint -&gt; Copy( MatrixMatch );

                <span class="comment">//Give this point a shader to use.</span>
                RenderPoint -&gt; Shader( _GET_SHADER_FILE( <span class="stringliteral">&quot;BasicProgram&quot;</span> ) );

                <span class="comment">//Create a new collision object for bullet collisions.</span>
                <span class="comment">//Have it follow the RenderPoint (Bullet object).</span>
                <span class="comment">//Have it linked to this process.</span>
                PointCollision = _CREATE( <a class="code" href="classc_collision_object.html" title="This Object is the base object for detecting collisions. This object should be created and passed a p...">cCollisionObject</a>( RenderPoint , <span class="keyword">this</span> ) );

                <span class="comment">//This will set the type of collision that this collision will use.</span>
                <span class="comment">//This will make a sphere or radius 0.5 units.</span>
                PointCollision -&gt; SetType ( 0.5 );

                <span class="comment">//This Collision Filter value is different to the one for cBall.</span>
                <span class="comment">//This is so we can differentiate between the different collisions.</span>
                PointCollision -&gt; CollisionFilter( 2 );

                <span class="comment">//Give this bullet a life span.</span>
                Life = 100.0;
   };

   <span class="keywordtype">void</span> Run()
   {
                <span class="comment">//Make the bullet move in the direction it is moving.</span>
                RenderPoint -&gt; AdvanceZ( 0.01 );

                <span class="comment">//Reduce the bullets remaining life. Eventually it will have run out of life.</span>
                Life = Life - 0.1;

                <span class="comment">//If the bullet has run out of life it should be killed</span>
                <span class="keywordflow">if</span>( Life &lt; 0.0 )
                {
                        <span class="comment">//Kill this bullet.</span>
                        _KILL_THIS();

                        <span class="comment">//As we know thi bullet is dying we can kill the point.</span>
                        _KILL( RenderPoint );

                        <span class="comment">//Since RenderPoint is being killed we should not point at it any more.</span>
                        RenderPoint = 0;
                }

                <span class="comment">//cProcess Pointer to use in the loop.</span>
                <a class="code" href="classc_process.html" title="This is the base code for a process. This will automatically create a new process. It will hand itself to cKernel to be processed every frame. Any Processes created by the user should inherit this type to be handled by cKernel automatically. Initialisation code should go in the constructor of the user type. Linking to cKernel is performed automatically by cProcess. Update code should go in the function Run(). Coed performed when a process is killed should go in the function Stop(). NOT the destructor. Code to handle Sleeping and Waking signals should go in OnSleep() and OnWake(). Code to handle interaction of two processes should go in either processes UserSignal() function.">cProcess</a> *CollidingProcess;

                <span class="comment">//cCollisionList to access the list of collisions</span>
                <a class="code" href="classc_collision_list.html" title="This is generated by doing Collision Detection with an object. This will cache all the detected colli...">cCollisionList</a> *ListOfCollisions;

                <span class="comment">//Generate a list of all collisions with this bullet.</span>
                <span class="comment">//Only check cCollisionObject s with the filter value 1.</span>
                <span class="comment">//I.E. Generate collisions between this bullet and any Balls.</span>
                ListOfCollisions = PointCollision -&gt; GenerateCollisionList( 1 );

                <span class="comment">//This will perform this code on every collision with</span>
                <span class="comment">//On each loop CollidingProcess will point to</span>
                <span class="comment">// the process linked to each colliding object.</span>
                _COLLISION_PROCESS_LOOP( ListOfCollisions, CollidingProcess )
                {
                        <span class="comment">//A Bullet has hit a ball so kill the ball.</span>
                        _KILL(CollidingProcess);
                }

                <span class="keyword">delete</span> ListOfCollisions;
   };

   <span class="keywordtype">void</span> Stop()
   {
                        <span class="comment">//If something else has killed this bullet then RenderPoint will still be alive.</span>
                <span class="keywordflow">if</span>(RenderPoint != 0)
                {
                        <span class="comment">//Kill RenderPoint.</span>
                        _KILL( RenderPoint );

                        <span class="comment">//Stop Pointing at the cPoint Object.</span>
                        RenderPoint = 0;

                        <span class="comment">//Notice how we do not kill PointCollision.</span>
                        <span class="comment">//Killing it will not break the program.</span>
                        <span class="comment">//cCollisionObject&#39;s a killed when their cRenderObject is killed.</span>
                        <span class="comment">//So we do not need to kill PointCollision.</span>
                        <span class="comment">//They can be killed separatly to their cRenderObject but should be killed first.</span>
                }
   };
};

<span class="comment">//Declare a new type of Process cCore.</span>
<span class="comment">//A Single instance of this process will be created</span>
<span class="comment">// by the engine at the start of the program.</span>
_PROCESS(cCore)
{
<span class="keyword">public</span>:

                <span class="comment">//Create a float to account for reloading time on firing the bullets.</span>
        <span class="keywordtype">float</span> Reload;

        cCore()
        {
        <span class="comment">//Load the imf pack with objects for demonstration 3.</span>
        <span class="comment">//This contains a renderable spherical mesh called BallModel.</span>
        <span class="comment">//This contains a texture called BallTexture.</span>
        <span class="comment">//This also contains a shader called TexturingProgram.</span>
        <span class="comment">//This also contains a bounce sound called BounceSound.</span>
        <span class="comment">//This also contains a second shader called BasicProgram.</span>
         _LOAD_FILE( <span class="stringliteral">&quot;Demonstration3.imf&quot;</span> );

        <span class="comment">//Move the camera back 60 units so it is outside the box and looking at the ball.</span>
        _CAMERA -&gt; Position (0.0 , 0.0 , -60);

        <span class="comment">//Create a cBall (Defined earlier).</span>
         _CREATE(cBall);

        };

        <span class="keywordtype">void</span> Run()
        {
                <span class="comment">//Change the Yaw by the change in the mouse position.</span>
                <span class="comment">//Multiply by a small value to slow it down.</span>
                _CAMERA -&gt; RotateY( _MOUSE-&gt;XSpeed() * 0.01 );

                <span class="comment">//Change the Pitch by the change in the mouse position.</span>
                <span class="comment">//Multiply by a small value to slow it down.</span>
                _CAMERA -&gt; RotateZ( _MOUSE-&gt;YSpeed() * 0.01 );

                <span class="comment">//If the gun is not reloaded, do a bit more reloading.</span>
                <span class="keywordflow">if</span>( Reload &lt; 10.0 ) { Reload = Reload + 0.11; }

                <span class="comment">//If the left mouse button is pressed.</span>
                <span class="comment">//AND reloading is completed</span>
                <span class="comment">// Fire a bullet and unload the gun.</span>
                <span class="keywordflow">if</span>( _MOUSE -&gt; Left() &amp;&amp; Reload &gt;= 10.0)
                {
                        <span class="comment">//Fire a Bullet</span>
                        <span class="comment">//Give it the cCameraMatrix4.</span>
                        _CREATE( cBullet( _CAMERA ) );

                        <span class="comment">//Tell the gun it is unloaded.</span>
                        Reload = 0.0 ;
                }
        };

        <span class="keywordtype">void</span> Stop()
        {

        };


 };
</pre></div> <h2><a class="anchor" id="ReSpwaningBouncingBallExample"></a>
Example with a continual supply of balls.</h2>
<p>We have collisions. So lets add health to the ball. Once it runs out of health it dies. We will also have the balls respawn so you get a new target when you shoot one. Finally lets have three balls on the screen at once. </p>
<div class="fragment"><pre class="fragment"><span class="comment">//Declare and Define a process for controlling the ball.</span>
<span class="comment">//class cBall : public cProcess</span>
 _PROCESS(cBall)
 {
 <span class="keyword">public</span>:

        <span class="comment">//Create pointer so cCore can  access the object it creates.</span>
 <a class="code" href="classc_model.html" title="A standard Textured Model renderable object.">cModel</a> *BallPointer;

        <span class="comment">//Create a pointer so cCore can play the bounce sound.</span>
 <a class="code" href="classc_audio_object.html" title="This class will allow a sound to be played. This class will link an audio source and a buffer...">cAudioObject</a> *BallBounce;

        <span class="comment">//Create a new Collision Object</span>
 <a class="code" href="classc_collision_object.html" title="This Object is the base object for detecting collisions. This object should be created and passed a p...">cCollisionObject</a> *BallCollision;

        <span class="comment">//Create a variable for each dimension the ball moves in.</span>
        <span class="comment">//This could be a c3DVf which is a 3 dimensional vector</span>
 <a class="code" href="classc3_d_vf.html" title="This is a 3 dimensional float vector object.">c3DVf</a> BallSpeed;

        <span class="comment">//Give this Ball a variable to store its health.</span>
 <span class="keywordtype">float</span> Health;

  <span class="comment">//Constructor - Initialisation code.</span>
        cBall()
        {
        <span class="comment">//Note the media will have been loaded in cCore.</span>
        <span class="comment">//Since cCore Creates this process</span>
        <span class="comment">//Our media will be loaded before we get to this point.</span>
        <span class="comment">//Create a Textured Model to put the ball on screen.</span>
                BallPointer =  _CREATE(<a class="code" href="classc_model.html" title="A standard Textured Model renderable object.">cModel</a>);

        <span class="comment">//Set the mesh it will use.</span>
                BallPointer -&gt; Mesh( <span class="stringliteral">&quot;BallModel&quot;</span> );

        <span class="comment">//Set the Texture it will use.</span>
                BallPointer -&gt; Texture( <span class="stringliteral">&quot;BallTexture&quot;</span> );

        <span class="comment">//Set the Shader it will use.</span>
                BallPointer -&gt; Shader( <span class="stringliteral">&quot;TexturingProgram&quot;</span> );

        <span class="comment">//Set a start position.</span>
        <span class="comment">//This is relative to the global position 0.0 , 0.0 , 0.0</span>
        <span class="comment">// Position it randomly between -20 and +20 on each axis.</span>
                BallPointer -&gt; Position( ZEROED_RANDOM_NUMBER * 20 ,
                                                                 ZEROED_RANDOM_NUMBER * 20 ,
                                                                 ZEROED_RANDOM_NUMBER * 20 );

        <span class="comment">//Create a Collision Object to enable collisions for the Ball.</span>
        <span class="comment">//Have it follow the position of the Ball.</span>
        <span class="comment">//Have it linked to this process.</span>
                BallCollision = _CREATE( <a class="code" href="classc_collision_object.html" title="This Object is the base object for detecting collisions. This object should be created and passed a p...">cCollisionObject</a>( BallPointer , <span class="keyword">this</span> ) );

        <span class="comment">//Set Type will set the type of collision. By handing it values it will generate an object at run time.</span>
        <span class="comment">//A Single float will make it a sphere of the specified radius.</span>
                BallCollision -&gt; SetType( 1.0 );

        <span class="comment">//We also need to set the filter value for the collision. This is important to maintain the speed of collision detection.</span>
        <span class="comment">//This means that this collision object will be checked under the value 1.</span>
                BallCollision -&gt; CollisionFilter( 1 );

        <span class="comment">//Move the camera back 60 units so it is outside the box and looking at the ball.</span>
                _CAMERA -&gt; Position (0.0 , 0.0 , -60);

        <span class="comment">//Set the ball to move in a random direction at 0.1 units per frame</span>
        <span class="comment">//RANDOM_NUMBER is a random float between 0.0 and 1.0.</span>
        <span class="comment">//Because this is an instance (not a Bamboo engine object) it should be accessed using the dot operator.</span>
                BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>( RANDOM_NUMBER * 0.1 );
                BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>( RANDOM_NUMBER * 0.1 );
                BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>( RANDOM_NUMBER * 0.1 );

        <span class="comment">//Create an audio file for playing the bounce sound.</span>
                BallBounce = _CREATE( <a class="code" href="classc_audio_object.html" title="This class will allow a sound to be played. This class will link an audio source and a buffer...">cAudioObject</a> );

        <span class="comment">//Create Buffer the sound we want to play into the cAudioObject.</span>
                BallBounce -&gt; Buffer ( <span class="stringliteral">&quot;BallSound&quot;</span> );

        <span class="comment">//Set the health to 100 percent.</span>
                Health = 100.0 ;

        };

        <span class="comment">//This is the function that will update the balls position every process cycle.</span>
        <span class="keywordtype">void</span> Run()
        {
                <span class="comment">//Increase the balls speed downwards by a small amount.</span>
                        BallSpeedY = BallSpeedY - 0.01;

                <span class="comment">//Advance the Ball by its speed in all three Global axis.</span>
                <span class="comment">//If this was a Local axis you would not notice a change until you rotated the ball around.</span>
                        BallPointer -&gt; GAdvance( BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>() , BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>() , BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>() );

                <span class="comment">//If the ball is outside any of the boundaries.</span>
                <span class="comment">//There are much more concise ways of doing this but this is the clearest.</span>
                <span class="comment">//This is exactly the same as previously, but with 6 boundaries instead of 1.</span>
                <span class="keywordflow">if</span>( BallPointer -&gt; X()  &lt; - 30.0  || BallPointer -&gt; X() &gt; 30.0)
                {
                        BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>( -BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>() ) ;
                        BallBounce -&gt; Play();
                }
                <span class="keywordflow">if</span>( BallPointer -&gt; Y()  &lt; - 30.0  || BallPointer -&gt; Y() &gt; 30.0)
                {
                        BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>( -BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>() ) ;
                        BallBounce -&gt; Play();
                }
                <span class="keywordflow">if</span>( BallPointer -&gt; Z()  &lt; - 30.0  || BallPointer -&gt; Z() &gt; 30.0)
                {
                        BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>( -BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>() ) ;
                        BallBounce -&gt; Play();
                }

        };

        <span class="keywordtype">void</span> Stop()
        {
                <span class="comment">//When this dies we want the ball to disappear.</span>
                        _KILL(BallPointer);
                        _KILL(BallSound);

                <span class="comment">//Stop BallPointer pointing at the model as it has been killed.</span>
                        BallPointer = 0;
                        BallSound = 0;
        };

        <span class="comment">//This is a Userdefined signal. see cUserSignal.</span>
        <span class="comment">//This allows you to send signals and information between cProcess Objects.</span>
        <span class="comment">//If you know the process type you can access member variables and functions directly.</span>
        <span class="comment">//Using signals allows you to contain an objects code entirely within it.</span>
        <span class="keywordtype">void</span> UserSignal( SIGNAL liSignal , <span class="keywordtype">void</span> *lpData )
        {
                <span class="comment">//if liSignal == 1 it indicates that a bullet has collided with this processes ball.</span>
                <span class="comment">//We should take some damage. The amount of damage is passed through lpData.</span>
                <span class="keywordflow">if</span>( liSignal == 1 )
                {
                        <span class="comment">//A bullet has collided.</span>
                        <span class="comment">//Deduct the Damage from the bullet from the health of the ball.</span>
                        <span class="keywordtype">float</span> *Damage;
                        Damage = lpData;
                        Health = Health - Damage[0];

                        <span class="comment">//If health is less than zero, this ball has died.</span>
                        <span class="comment">//Kill this ball and create a new one to replace it as a target.</span>
                        <span class="keywordflow">if</span>( Health &lt; 0 ) { _KILL_THIS(); _CREATE(cBall); }
                }

        };
};

<span class="comment">//Create a new process type (class) cBullet.</span>
<span class="comment">//This will control a single bullet</span>
<span class="comment">//class cBullet : public cProcess</span>
_PROCESS(cBullet)
{
 <span class="keyword">public</span>:
        <span class="comment">//Create a cPoint pointer for accessing the bullet render object.</span>
  <a class="code" href="classc_point.html" title="A Renderable object for rendering single points.">cPoint</a> *RenderPoint;

        <span class="comment">//Create a cCollisionObject for bullet collisions.</span>
  <a class="code" href="classc_collision_object.html" title="This Object is the base object for detecting collisions. This object should be created and passed a p...">cCollisionObject</a> *PointCollision;

   <span class="comment">//Variable to stre the remaining lifespan of the bullet</span>
  <span class="keywordtype">float</span> Life;

   cBullet(<a class="code" href="classc_camera_matrix4.html" title="This is a translation matrix for a camera object A Special Matric for Cameras. All the translations a...">cCameraMatrix4</a> *MatrixMatch)
   {
                <span class="comment">//Create a point object for this object.</span>
                        RenderPoint = _CREATE( <a class="code" href="classc_point.html" title="A Renderable object for rendering single points.">cPoint</a> );

                <span class="comment">//Make this start with the same transalation as the camera.</span>
                        RenderPoint -&gt; Copy( MatrixMatch );

                <span class="comment">//Give this point a shader to use.</span>
                        RenderPoint -&gt; Shader( <span class="stringliteral">&quot;BasicProgram&quot;</span> );

                <span class="comment">//Create a new collision object for bullet collisions.</span>
                <span class="comment">//Have it follow the RenderPoint (Bullet object).</span>
                <span class="comment">//Have it linked to this process.</span>
                        PointCollision = _CREATE( <a class="code" href="classc_collision_object.html" title="This Object is the base object for detecting collisions. This object should be created and passed a p...">cCollisionObject</a>( RenderPoint , <span class="keyword">this</span> ) );

                <span class="comment">//This will set the type of collision that this collision will use.</span>
                <span class="comment">//This will make a sphere or radius 0.5 units.</span>
                        PointCollision -&gt; SetType ( 0.5 );

                <span class="comment">//This Collision Filter value is different to the one used for the balls.</span>
                <span class="comment">//This is so we can differentiate between the different collisions.</span>
                        PointCollision -&gt; CollisionFilter( 2 );

                <span class="comment">//Give this bullet a life span.</span>
                        Life = 100.0;
   };

   <span class="keywordtype">void</span> Run()
   {
                <span class="comment">//Make the bullet move in the direction it is moving.</span>
                        RenderPoint -&gt; AdvanceZ( 0.01 );

                <span class="comment">//Reduce the bullets remaining life. Eventually it will have run out of life.</span>
                        Life = Life - 0.1;

                <span class="comment">//If the bullet has run out of life it should be killed</span>
                <span class="keywordflow">if</span>( Life &lt; 0.0 )
                {
                        <span class="comment">//Kill this bullet.</span>
                                _KILL_THIS();

                        <span class="comment">//As we know this bullet is dying we can kill the point.</span>
                                _KILL( RenderPoint );

                        <span class="comment">//Since RenderPoint is being killed we should not point at it any more.</span>
                                RenderPoint = 0;
                }

                <a class="code" href="classc_process.html" title="This is the base code for a process. This will automatically create a new process. It will hand itself to cKernel to be processed every frame. Any Processes created by the user should inherit this type to be handled by cKernel automatically. Initialisation code should go in the constructor of the user type. Linking to cKernel is performed automatically by cProcess. Update code should go in the function Run(). Coed performed when a process is killed should go in the function Stop(). NOT the destructor. Code to handle Sleeping and Waking signals should go in OnSleep() and OnWake(). Code to handle interaction of two processes should go in either processes UserSignal() function.">cProcess</a> *CollidingProcess;
                <a class="code" href="classc_collision_list.html" title="This is generated by doing Collision Detection with an object. This will cache all the detected colli...">cCollisionList</a> *ListOfCollisions;

                <span class="comment">//Generate a list of all collisions between this bullet and Collision Objects.</span>
                <span class="comment">//Only cCollisionObject s with the filter value 1 will be checked.</span>
                <span class="comment">//I.E. Generate collisions between this bullet and any Balls.</span>
                        ListOfCollisions = PointCollision -&gt; GenerateCollisionList( 1 );

                        <span class="comment">//This will perform this code on every collision with CollidingProcess</span>
                        <span class="comment">//In each loop CollidingProcess will point to the process linked to the colliding objects.</span>
                _COLLISION_PROCESS_LOOP( ListOfCollisions, CollidingProcess )
                {
                                <span class="comment">//A Bullet has hit a ball so we signal the ball to say it has been damaged.</span>
                        <span class="keywordtype">float</span> Damage;

                                <span class="comment">//Generate a Random amount of damage between 0 and 50.</span>
                        Damage = RANDOM_NUMBER * 50;

                                <span class="comment">//Signal the Ball we collided with to damage it.</span>
                        CollidingProcess -&gt; UserSignal( 1 , &amp;Damage );

                                This bullet has hit a target so we kill it.
                        _KILL_THIS();
                }

                <span class="keyword">delete</span> ListOfCollisions;
   };

   <span class="keywordtype">void</span> Stop()
   {
                        <span class="comment">//If something else has killed this bullet then RenderPoint will still be alive.</span>
                <span class="keywordflow">if</span>(RenderPoint != 0)
                {
                                <span class="comment">//Kill RenderPoint.</span>
                        _KILL( RenderPoint );

                                <span class="comment">//Stop Pointing at the cPoint Object.</span>
                        RenderPoint = 0;

                                <span class="comment">//Notice how we do not kill PointCollision.</span>
                                <span class="comment">//Killing it will nto break the program,</span>
                                <span class="comment">//cCollisionObject s a killed when their cRenderObject is killed.</span>
                                <span class="comment">//As such we do not need to kill it.</span>
                                <span class="comment">//They can be killed seperatly to their cRenderObject.</span>
                                <span class="comment">//A cCollisionObject should be killed before its cRenderObject.</span>
                }
   };
};

<span class="comment">//Declare a new type of Process cCore.</span>
<span class="comment">//A Single instance of this process will be created</span>
<span class="comment">// by the engine at the start of the program.</span>
<span class="comment">//class cCore : public cProcess</span>
_PROCESS(cCore)
{
<span class="keyword">public</span>:

        <span class="comment">//Create a float to account for reloading time on firing the bullets.</span>
        <span class="keywordtype">float</span> Reload;

        cCore()
        {
        <span class="comment">//Load the imf pack with objects for demonstration 3.</span>
        <span class="comment">//This contains a renderable spherical mesh called BallModel.</span>
        <span class="comment">//This contains a texture called BallTexture.</span>
        <span class="comment">//This also contains a shader called TexturingProgram.</span>
        <span class="comment">//This also contains a bounce sound called BounceSound.</span>
        <span class="comment">//This also contains a second shader for rendering Point Objects BasicProgram.</span>
                _LOAD_FILE( <span class="stringliteral">&quot;Demonstration3.imf&quot;</span> );

        <span class="comment">//Move the camera back 60 units so it is outside the box.</span>
        <span class="comment">// The box will now be in front of the camera.</span>
                _CAMERA -&gt; Position (0.0 , 0.0 , -60);

        <span class="comment">//Here we create a ball.</span>
                _CREATE(cBall);

        <span class="comment">//Lets create 2 more so we have three targets</span>
                _CREATE(cBall);
                _CREATE(cBall);

        };

        <span class="keywordtype">void</span> Run()
        {
                <span class="comment">//Change the Yaw by the change in the mouse position.</span>
                <span class="comment">//Multiply by a small value to slow it down.</span>
                        _CAMERA -&gt; RotateY( _MOUSE-&gt;XSpeed() * 0.01 );

                <span class="comment">//Change the Pitch by the change in the mouse position.</span>
                <span class="comment">//Multiply by a small value to slow it down.</span>
                        _CAMERA -&gt; RotateZ( _MOUSE-&gt;YSpeed() * 0.01 );

                <span class="comment">//If the gun is not reloaded, do a bit more reloading.</span>
                        <span class="keywordflow">if</span>( Reload &lt; 10.0 ) { Reload = Reload + 0.11; }

                <span class="comment">//If the left mouse button is pressed.</span>
                <span class="comment">//AND reloading is completed</span>
                <span class="comment">// Fire a bullet and unload the gun.</span>
                <span class="keywordflow">if</span>( _MOUSE -&gt; Left() &amp;&amp; Reload &gt;= 10.0)
                {
                        <span class="comment">//Fire a Bullet</span>
                                _CREATE(cBullet);

                        <span class="comment">//Tell the gun it is unloaded.</span>
                                Reload = 0.0 ;
                }
        };

        <span class="keywordtype">void</span> Stop()
        {

        };


 };
</pre></div> <h2><a class="anchor" id="CompleteNoCommentsBouncingBallExample"></a>
Previous Example without comments</h2>
<p>Same Code without comments to show amount of code required to make this simple game. </p>
<div class="fragment"><pre class="fragment"> _PROCESS(cBall)
 {
 <span class="keyword">public</span>:


 <a class="code" href="classc_model.html" title="A standard Textured Model renderable object.">cModel</a> *BallPointer;
 <a class="code" href="classc_audio_object.html" title="This class will allow a sound to be played. This class will link an audio source and a buffer...">cAudioObject</a> *BallBounce;
 <a class="code" href="classc_collision_object.html" title="This Object is the base object for detecting collisions. This object should be created and passed a p...">cCollisionObject</a> *BallCollision;
 <a class="code" href="classc3_d_vf.html" title="This is a 3 dimensional float vector object.">c3DVf</a> BallSpeed;
 <span class="keywordtype">float</span> Health;

        cBall()
        {
        BallPointer =  _CREATE(<a class="code" href="classc_model.html" title="A standard Textured Model renderable object.">cModel</a>);
        BallPointer -&gt; Mesh( <span class="stringliteral">&quot;BallModel&quot;</span> );
        BallPointer -&gt; Texture( <span class="stringliteral">&quot;BallTexture&quot;</span> );
        BallPointer -&gt; Shader( <span class="stringliteral">&quot;TexturingProgram&quot;</span> );
        BallPointer -&gt; Position( ZEROED_RANDOM_NUMBER * 20 ,
                                                         ZEROED_RANDOM_NUMBER * 20 ,
                                                         ZEROED_RANDOM_NUMBER * 20 );

        BallCollision = _CREATE( <a class="code" href="classc_collision_object.html" title="This Object is the base object for detecting collisions. This object should be created and passed a p...">cCollisionObject</a>( BallPointer , <span class="keyword">this</span> ) );
        BallCollision -&gt; SetType( 1.0 );
        BallCollision -&gt; CollisionFilter( 1 );

        BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>( RANDOM_NUMBER * 0.1 );
        BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>( RANDOM_NUMBER * 0.1 );
        BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>( RANDOM_NUMBER * 0.1 );

        BallBounce = _CREATE(<a class="code" href="classc_audio_object.html" title="This class will allow a sound to be played. This class will link an audio source and a buffer...">cAudioObject</a>);
        BallBounce -&gt; Buffer ( <span class="stringliteral">&quot;BallSound&quot;</span> );

        Health = 100.0 ;
        };

        <span class="keywordtype">void</span> Run()
        {
                BallSpeedY = BallSpeedY - 0.01;

                BallPointer -&gt; GAdvance( BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>() , BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>() , BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>() );

                <span class="keywordflow">if</span>( BallPointer -&gt; X()  &lt; - 30.0  || BallPointer -&gt; X() &gt; 30.0)
                {
                        BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>( -BallSpeed.<a class="code" href="classc3_d_vf.html#a2304a40da7960b52ab47d18028011e1c" title="Return this Vectors X Value.">X</a>() ) ;
                        BallBounce -&gt; Play();
                }
                <span class="keywordflow">if</span>( BallPointer -&gt; Y()  &lt; - 30.0  || BallPointer -&gt; Y() &gt; 30.0)
                {
                        BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>( -BallSpeed.<a class="code" href="classc3_d_vf.html#a2fb998ffcf6feb5cb74851b0e454e3f2" title="Return this Vectors Y Value.">Y</a>() ) ;
                        BallBounce -&gt; Play();
                }
                <span class="keywordflow">if</span>( BallPointer -&gt; Z()  &lt; - 30.0  || BallPointer -&gt; Z() &gt; 30.0)
                {
                        BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>( -BallSpeed.<a class="code" href="classc3_d_vf.html#aec04e18360364105fee47d174ecee2e6" title="Return this Vectors Z Value.">Z</a>() ) ;
                        BallBounce -&gt; Play();
                }

        };

        <span class="keywordtype">void</span> Stop()
        {

                _KILL(BallPointer);
                _KILL(BallSound);

                BallPointer = 0;
                BallSound = 0;
        };

        <span class="keywordtype">void</span> UserSignal( SIGNAL liSignal , <span class="keywordtype">void</span> *lpData )
        {
                <span class="keywordflow">if</span>( liSignal == 1 )
                {
                        <span class="keywordtype">float</span> *Damage;
                        Damage = lpData;
                        Health = Health - Damage[0];

                        <span class="keywordflow">if</span>( Health &lt; 0 ) { _KILL_THIS(); _CREATE(cBall); }
                }

        };
};


_PROCESS(cBullet)
{
 <span class="keyword">public</span>:

  <a class="code" href="classc_point.html" title="A Renderable object for rendering single points.">cPoint</a> *RenderPoint;
  <a class="code" href="classc_collision_object.html" title="This Object is the base object for detecting collisions. This object should be created and passed a p...">cCollisionObject</a> *PointCollision;
  <span class="keywordtype">float</span> Life;

   cBullet(<a class="code" href="classc_camera_matrix4.html" title="This is a translation matrix for a camera object A Special Matric for Cameras. All the translations a...">cCameraMatrix4</a> *MatrixMatch)
   {
                RenderPoint = _CREATE( <a class="code" href="classc_point.html" title="A Renderable object for rendering single points.">cPoint</a> );
                RenderPoint -&gt; Copy( MatrixMatch );
                RenderPoint -&gt; Shader( <span class="stringliteral">&quot;BasicProgram&quot;</span> );

                PointCollision = _CREATE( <a class="code" href="classc_collision_object.html" title="This Object is the base object for detecting collisions. This object should be created and passed a p...">cCollisionObject</a>( RenderPoint , <span class="keyword">this</span> ) );
                PointCollision -&gt; SetType ( 0.5 );
                PointCollision -&gt; CollisionFilter( 2 );

                Life = 100.0;
   };

   <span class="keywordtype">void</span> Run()
   {

                RenderPoint -&gt; AdvanceZ( 0.01 );
                Life = Life - 0.1;

                <span class="keywordflow">if</span>( Life &lt; 0.0 )
                {
                        _KILL_THIS();
                        _KILL( RenderPoint );
                        RenderPoint = 0;
                }

                <a class="code" href="classc_process.html" title="This is the base code for a process. This will automatically create a new process. It will hand itself to cKernel to be processed every frame. Any Processes created by the user should inherit this type to be handled by cKernel automatically. Initialisation code should go in the constructor of the user type. Linking to cKernel is performed automatically by cProcess. Update code should go in the function Run(). Coed performed when a process is killed should go in the function Stop(). NOT the destructor. Code to handle Sleeping and Waking signals should go in OnSleep() and OnWake(). Code to handle interaction of two processes should go in either processes UserSignal() function.">cProcess</a> *CollidingProcess;
                <a class="code" href="classc_collision_list.html" title="This is generated by doing Collision Detection with an object. This will cache all the detected colli...">cCollisionList</a> *ListOfCollisions;

                ListOfCollisions = PointCollision -&gt; GenerateCollisionList( 1 );
                _COLLISION_PROCESS_LOOP( ListOfCollisions, CollidingProcess )
                {
                        <span class="keywordtype">float</span> Damage;
                        Damage = RANDOM_NUMBER * 50;
                        CollidingProcess -&gt; UserSignal( 1 , &amp;Damage );
                        _KILL_THIS();
                }

                <span class="keyword">delete</span> ListOfCollisions;
   };

   <span class="keywordtype">void</span> Stop()
   {
                <span class="keywordflow">if</span>(RenderPoint != 0)
                {
                        _KILL( RenderPoint );
                        RenderPoint = 0;
                }
   };
};


_PROCESS(cCore)
{
<span class="keyword">public</span>:

        <span class="keywordtype">float</span> Reload;

        cCore()
        {
         _LOAD_FILE( <span class="stringliteral">&quot;Demonstration3.imf&quot;</span> );

        _CAMERA -&gt; Position (0.0 , 0.0 , -60);


    _CREATE(cBall);
        _CREATE(cBall);
        _CREATE(cBall);

        };

        <span class="keywordtype">void</span> Run()
        {
                _CAMERA -&gt; RotateY( _MOUSE-&gt;XSpeed() * 0.01 );
                _CAMERA -&gt; RotateZ( _MOUSE-&gt;YSpeed() * 0.01 );

                <span class="keywordflow">if</span>( Reload &lt; 10.0 ) { Reload = Reload + 0.11; }

                <span class="keywordflow">if</span>( _MOUSE -&gt; Left() &amp;&amp; Reload &gt;= 10.0)
                {
                        _CREATE(cBullet);
                        Reload = 0.0 ;
                }
        };

        <span class="keywordtype">void</span> Stop()
        {

        };

 };
</pre></div><p> That is less than 200 lines, including spacings and empty lines. Probably less than 150 lines of code to make a simple game! </p>
</div></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Tue Feb 7 2012 16:30:03 for Bamboo by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
